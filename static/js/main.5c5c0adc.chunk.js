(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();e.__esModule=!0;var i=function(t){function e(e,n,o){var i=t.call(this,e,n,o)||this;return i.mealyToMoore=function(){var t=new Map;i.edges.forEach(function(e){e.transitions.forEach(function(e){return e.forEach(function(e){var n=e.output;t.has(n)||t.set(n,t.size)})})});var e=function(){var e=0;return i.nodes.reduce(function(n,o){var r=i.edges.filter(function(t){return t.to===o.id}),s=[];return t.forEach(function(){return s.push(void 0)}),r.forEach(function(n){n.transitions.forEach(function(n){return n.forEach(function(n){var i=n.output,r=t.get(i);s[r]||(s[r]={id:e,isAdmit:o.isAdmit,output:i},e++)})})}),0===s.filter(function(t){return void 0!==t}).length&&(s[0]={id:e,isAdmit:o.isAdmit,output:"~"},e++),n.push(s),n},[])}(),n=e.reduce(function(n,o,r){return i.edges.filter(function(t){return t.from===i.nodes[r].id}).forEach(function(i){return i.transitions.forEach(function(r){return r.forEach(function(r){o.forEach(function(o){console.log(o),void 0!==o&&n.push({from:o.id,to:e[i.to][t.get(r.output)].id,transitions:new Set([[{title:r.title}]])})})})})}),n},[]),o=[];n.sort(function(t,e){return t.from-e.from||t.to-e.to});for(var r=0;r<n.length;r++){for(var s=[],a=0,c=r;c<n.length;c++)n[r].from===n[c].from&&n[r].to===n[c].to&&(s.push(Array.from(n[c].transitions)[0][0]),a++);o.push({from:n[r].from,to:n[r].to,transitions:new Set([s])}),r+=a-1}var u=i.startStatements.map(function(t){return t.id});return{graphcore:{edges:o,nodes:e.reduce(function(t,e,n){return e.forEach(function(e){e&&t.push(e)}),t},[])},start:u.reduce(function(t,n){var o=e[n].filter(function(t){if(void 0!==t)return t});return t.push(o[0]),t},[])}},i.step=i.oaStep,i.run=i.oaRun,i}return o(e,t),e}(n(133).OutputAutomata);e.Mealy=i},119:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();e.__esModule=!0;var i=function(t){function e(e,n,o){var i=t.call(this,e,n,o)||this;return i.restart=function(){i.counterSteps=0,i.historiStep=[],i.curPosition=[],i.startStatements.forEach(function(t){i.curPosition.push({stmt:i.statements.get(t.id)})})},i.mooreToMealy=function(){var t=new Map;i.nodes.forEach(function(e){return t.set(e.id,{id:e.id,isAdmit:e.isAdmit,output:e.output})});var e=i.edges.map(function(e){var n=new Set,o=[];return e.transitions.forEach(function(n){return n.forEach(function(n){var i;o.push({title:n.title,output:null===(i=t.get(e.to))||void 0===i?void 0:i.output})})}),n.add(o),{from:e.from,to:e.to,transitions:n}});return console.log(">>>>",i.startStatements),{graphcore:{edges:e,nodes:i.nodes.map(function(t){return{id:t.id,isAdmit:t.isAdmit}})},start:i.startStatements.map(function(t){return{id:t.id,isAdmit:t.isAdmit}})}},i.step=i.oaStep,i.run=i.oaRun,i}return o(e,t),e}(n(133).OutputAutomata);e.Moore=i},133:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};e.__esModule=!0;var r=n(15),s=function(t){function e(e,n,o){var i=t.call(this,e,n)||this;return i.haveEpsilon=function(){return void 0!==i.alphabet.get(r.EPS)},i.restart=function(){i.counterSteps=0,i.historiStep=[],i.curPosition=[],i.startStatements.forEach(function(t){i.curPosition.push({stmt:i.statements.get(t.id)})})},i.oaRun=function(){var t;i.historiRun=[],i.counterStepsForResult=0;for(var e=0;e<i.input.length;e++){var n={counterSteps:i.counterStepsForResult,curPosition:i.curPosition,historiStep:i.historiRun},o=i._step(n);i.counterStepsForResult=n.counterSteps,i.curPosition=n.curPosition,i.historiRun=n.historiStep,t=o.output}return{counter:i.counterStepsForResult,history:i.historiRun,isAdmit:i.haveAdmitting(i.curPosition),nodes:i.toNodes(i.curPosition),output:t}},i.nextStepPosition=function(t,e){return i.cellMatrix(t.stmt.idLogic,e).map(function(t){return{position:{stmt:t},output:t.output}})},i.nextStepPositions=function(t,e){var n=t.map(function(t){return i.nextStepPosition(t,e)});return{positions:n.reduce(function(t,e){return e.forEach(function(e){return t.push(e.position)}),t},[]),outputs:n.reduce(function(t,e){return e.forEach(function(e){if(void 0===e.output)throw new Error("Output undefinded");t.push(e.output)}),t},[])}},i._step=function(t){var e,n=i.alphabet.get(null===(e=i.input[t.counterSteps])||void 0===e?void 0:e.value),o=i.nextStepPositions(t.curPosition,n);t.curPosition=o.positions;var r=i.toNodes(t.curPosition);return t.historiStep.push({nodes:r,by:n}),t.curPosition.length>0&&t.counterSteps++,{counter:t.counterSteps,history:t.historiStep,isAdmit:i.haveAdmitting(t.curPosition),nodes:r,output:o.outputs}},i.oaStep=function(){var t={counterSteps:i.counterSteps,curPosition:i.curPosition,historiStep:i.historiStep},e=i._step(t);return i.counterSteps=t.counterSteps,i.curPosition=t.curPosition,i.historiStep=t.historiStep,{counter:e.counter,history:e.history,isAdmit:e.isAdmit,nodes:e.nodes,output:e.output}},i.setInput=function(t){i.input=[],t.forEach(function(t){i.input.push({idLogic:i.alphabet.get(t),value:t})}),i.restart()},i.curPosition=[],n.forEach(function(t){i.curPosition.push({stmt:i.statements.get(t.id)})}),i.setInput(o),i.counterSteps=0,console.log("ALPHBT"),i.alphabet.forEach(function(t,e){return console.log(t,e)}),console.log("STMTS"),i.statements.forEach(function(t){return console.log(t)}),console.log(i.curPosition),i.matrix.forEach(function(t){console.log(),t.forEach(function(t){return console.log(t)})}),i}return o(e,t),e.prototype.isDeterministic=function(){var t=!0;return this.matrix.forEach(function(e){return e.forEach(function(e){var n=e[0],o=e.reduce(function(t,e){return t||e.stackDown===n.stackDown},!1);e.length>1&&o&&(t=!1)})}),t},e.prototype.toNodes=function(t){var e=this,n=[];return t.forEach(function(t){var o=i(i({},e.nodes[t.stmt.idLogic]),{stack:void 0===t.stack?void 0:t.stack.getStorage()});n.push(o)}),n},e.prototype.haveAdmitting=function(t){return t.reduce(function(t,e){return t&&e.stmt.isAdmit},!0)},e}(r.Computer);e.OutputAutomata=s},140:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();e.__esModule=!0;var i=n(87),r=n(34),s=function(t){function e(e,n,o){var i=t.call(this,e,n,o)||this;return i.step=function(){if(!t.prototype.isDeterministic.call(i))throw new r.NonDeterministic;return i.enfaStep()},i.run=function(){if(!t.prototype.isDeterministic.call(i))throw new r.NonDeterministic;return i.enfaRun()},i.setInput(o),i}return o(e,t),e}(i.EpsilonNFA);e.DFA=s;new s({nodes:[{id:1,isAdmit:!1},{id:2,isAdmit:!0}],edges:[{from:1,to:2,transitions:new Set([[{title:"0"}]])},{from:2,to:2,transitions:new Set([[{title:"0"}]])}]},[{id:1,isAdmit:!1}],[])},141:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();e.__esModule=!0;var i=function(t){function e(e,n,o){var i=t.call(this,e,n,o)||this;if(i.haveEpsilon())throw new Error("Epsilon Transitions");return i}return o(e,t),e}(n(87).EpsilonNFA);e.NFA=i},142:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};e.__esModule=!0;var r=n(31),s=n(69),a=n(15),c=n(34),u=function(){function t(){this.storage=["_"],this.pointer=0}return t.prototype.getPointer=function(){return this.pointer},t.prototype.reset=function(){this.storage=["_"],this.pointer=0},t.prototype.lookUp=function(){return this.storage[this.pointer]},t.prototype.initialize=function(t){var e=this;t.forEach(function(t){return e.mvRight("_",t)}),this.pointer=0},t.prototype.mvRight=function(t,e){this.storage[this.pointer]===t&&(this.storage[this.pointer]=e,this.pointer++),this.pointer===this.storage.length&&this.storage.push("_")},t.prototype.mvLeft=function(t,e){if(0===this.pointer){this.storage[this.pointer]===t&&(this.storage[this.pointer]=e,this.pointer=0);var n=["_"];this.storage.forEach(function(t){return n.push(t)}),this.storage=n}else this.storage[this.pointer]===t&&(this.storage[this.pointer]=e,this.pointer--)},t.prototype.getStorage=function(){return this.storage},t}();e.TMMemory=u;var l=function(t){function e(e,n,o){var s=t.call(this,e,n,o)||this;return s.mem=new u,s.__step=function(t,e,n){var o="";return s.cellMatrix(s.curPosition[0].stmt.idLogic,e).forEach(function(t){t.stackDown===s.mem.lookUp()&&(t.move===r.Move.R&&(s.mem.mvRight(t.stackDown,t.stackPush[0]),o=t.stackDown),t.move===r.Move.L&&(s.mem.mvLeft(t.stackDown,t.stackPush[0]),o=t.stackDown),s.assignCurMt({stmt:s.statements.get(t.id)}))}),n.push({nodes:[s.nodes[s.curPosition[0].stmt.idLogic]],by:o}),console.log("this.mem.getStorage()"),console.log(s.mem.getStorage()),t++,{nodes:[s.nodes[s.curPosition[0].stmt.idLogic]],isAdmit:s.curPosition[0].stmt.isAdmit,counter:t,history:n,memory:s.mem.getStorage(),pointer:s.mem.getPointer()}},s.restart=function(){s.counterSteps=0,s.historiStep=[],s.curPosition=[],s.mem.reset(),s.curPosition=[{stmt:s.statements.get(s.startStatements[0].id)}]},s.mtTrun=function(){throw Error("TM run")},s.setInput=function(t){s.input=[],s.mem.reset(),s.mem.initialize(t),s.counterSteps=0,s.historiStep=[],s.curPosition=[],s.curPosition=[{stmt:s.statements.get(s.startStatements[0].id)}],console.log(s.curPosition)},s.mtStep=function(){console.log("STPMT");var t=s.__step(s.counterSteps,0,s.historiStep);return s.counterSteps=t.counter,s.historiStep=t.history,""===t.history[t.history.length-1].by&&(t.nodes=[]),i(i({},t),{memory:s.mem.getStorage()})},s.step=function(){if(!s.isDeterministic())throw new c.NonDeterministic;return s.mtStep()},s.run=function(){if(!s.isDeterministic())throw new c.NonDeterministic;return s.mtTrun()},s.checkMemFormat(e),s.mem.initialize(o),s.curPosition=[{stmt:s.statements.get(s.startStatements[0].id)}],console.log("MTMTMTMTMTTMMTMTMT::::::::::"),s}return o(e,t),e.prototype.checkMemFormat=function(t){var e=!0;if(t.edges.forEach(function(t){return t.transitions.forEach(function(t){t.forEach(function(t){var n,o;(null===(n=t.stackPush)||void 0===n?void 0:n.length)&&(null===(o=t.stackPush)||void 0===o?void 0:o.length)>1&&(e=!1)})})}),!e)throw Error("Not MT mem")},e.prototype.curMt=function(){return this.curPosition[0]},e.prototype.assignCurMt=function(t){this.curPosition[0]=t},e.prototype.isDeterministic=function(){var t=!0;return this.matrix.forEach(function(e){return e.forEach(function(e){var n=e[0],o=e.reduce(function(t,e,o){return 0!==o&&(t||e.stackDown===n.stackDown&&(i=e.stackPush,r=n.stackPush,!(!i||!r)&&i.length===r.length&&i.reduce(function(t,e,n){return t&&i[n]===r[n]},!0)));var i,r},!1);e.length>1&&o&&(t=!1)})}),t},e}(s.PDA);e.TM=l;var d=new l({nodes:[{id:1,isAdmit:!1},{id:2,isAdmit:!1}],edges:[{from:1,to:2,transitions:new Set([[{title:a.EPS,stackDown:"0",stackPush:["0"],move:r.Move.R},{title:a.EPS,stackDown:"1",stackPush:["1"],move:r.Move.R}]])}]},[{id:1,isAdmit:!1}],["1"]);console.log(d.isDeterministic())},143:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();e.__esModule=!0;var i=n(69),r=n(34),s=function(t){function e(e,n,o,i){var s=t.call(this,e,n,o,i)||this;return s.step=function(){if(!t.prototype.isDeterministic.call(s))throw new r.NonDeterministic;return s.pdaStep()},s.run=function(){if(!t.prototype.isDeterministic.call(s))throw new r.NonDeterministic;return s.pdaRun()},s.setInput(o),s}return o(e,t),e}(i.PDA);e.DPDA=s},144:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();e.__esModule=!0;var i=n(34),r=function(t){function e(e,n,o){var r=t.call(this,e,n,o)||this;return r.step=function(){if(!t.prototype.isDeterministic.call(r))throw new i.NonDeterministic;return r.oaRun()},r.run=function(){if(!t.prototype.isDeterministic.call(r))throw new i.NonDeterministic;return r.oaRun()},r}return o(e,t),e}(n(118).Mealy);e.DMealy=r;var s=new r({nodes:[{id:0,isAdmit:!1},{id:1,isAdmit:!1}],edges:[{from:0,to:0,transitions:new Set([[{title:"5",output:"n"}]])},{from:0,to:1,transitions:new Set([[{title:"5",output:"n"}]])}]},[{id:0,isAdmit:!1}],[]);console.log(s.isDeterministic())},145:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();e.__esModule=!0;var i=n(34),r=function(t){function e(e,n,o){var r=t.call(this,e,n,o)||this;return r.step=function(){if(!t.prototype.isDeterministic.call(r))throw new i.NonDeterministic;return r.oaRun()},r.run=function(){if(!t.prototype.isDeterministic.call(r))throw new i.NonDeterministic;return r.oaRun()},r}return o(e,t),e}(n(119).Moore);e.DMoore=r;var s=new r({nodes:[{id:0,isAdmit:!1},{id:1,isAdmit:!1},{id:2,isAdmit:!1}],edges:[{from:0,to:0,transitions:new Set([[{title:"1"}]])},{from:0,to:1,transitions:new Set([[{title:"1"}]])}]},[{id:0,isAdmit:!1}],[]);console.log(s.isDeterministic())},15:function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};e.__esModule=!0,e.eof={isAdmit:!1,idLogic:-1,id:-1},e.EPS="Epsilon",e.BOTTOM="Z0";var i=function(){function t(t,e){var n=this;this.input=[],this.alphabet=new Map,this.statements=new Map,this.startStatements=[],this.edges=[],this.counterSteps=0,this.counterStepsForResult=0,this.historiStep=[],this.historiRun=[],this.matrix=[],this.byEmptyStackAdmt=function(t){throw new Error("PDA attribute")},this.nfaToDfa=function(){throw new Error("DFA conversion")},this.minimizeDfa=function(){throw new Error("DFA conversion")},this.mooreToMealy=function(){throw new Error("Moor conversion")},this.mealyToMoore=function(){throw new Error("Moor conversion")},this.getCurrNode=function(){return n.currentNode.id},this.getStartStatements=function(){return n.startStatements},t.edges.sort(function(t,e){return t.from-e.from}).forEach(function(t){return n.edges.push({transitions:void 0===t.transitions?new Set([[{title:""}]]):t.transitions,from:t.from,to:t.to,localValue:[]})});for(var o=function(t){i.edges[t].localValue=[],i.edges[t].transitions.forEach(function(e){return e.forEach(function(e){return n.edges[t].localValue.push(e)})})},i=this,r=0;r<this.edges.length;r++)o(r);this.getAlphabetFromEdges(),this.getStatementsFromNodes(t.nodes),this.startStatements=e,this.currentNode=e[0],this.nodes=t.nodes,this.createMatrix()}return t.prototype.getAlphabetFromEdges=function(){for(var t=this,e=new Set,n=0;n<this.edges.length;n++)this.edges[n].localValue.forEach(function(t){""!==t.title&&e.add(t.title)});var o=0;e.forEach(function(e){""!==e&&(t.alphabet.set(e,o),o++)})},t.prototype.getStatementsFromNodes=function(t){for(var e=0;e<t.length;e++)this.statements.set(t[e].id,{id:t[e].id,isAdmit:t[e].isAdmit,idLogic:e,output:t[e].output})},t.prototype.createMatrix=function(){for(var t=0;t<this.statements.size;t++){this.matrix[t]=[];for(var n=0;n<this.alphabet.size;n++)this.matrix[t][n]=[]}for(t=0;t<this.edges.length;t++){var i=this.statements.get(this.edges[t].from),r=this.statements.get(this.edges[t].to);for(n=0;n<this.edges[t].localValue.length;n++){var s=this.alphabet.get(this.edges[t].localValue[n].title);if(void 0!==s){console.log(s),console.log(this.edges[t].localValue[n].title);var a=this.edges[t].localValue[n].stackDown,c=this.edges[t].localValue[n].stackPush,u=this.edges[t].localValue[n].move,l=void 0===this.edges[t].localValue[n].output?r.output:this.edges[t].localValue[n].output;void 0!==a&&void 0!==c&&""!==a&&0!==c.length||(a=e.EPS,c=[e.EPS]),this.matrix[i.idLogic][s].push(o(o({},r),{stackDown:a,stackPush:c,move:u,output:l}))}}}this.alphabet.forEach(function(t,e){return console.log(t," ",e)}),this.statements.forEach(function(t){return console.log(t)}),this.matrix.forEach(function(t){console.log(),t.forEach(function(t){return console.log(t)})})},t.prototype.cellMatrix=function(t,e){return this.matrix[t][e]},t}();e.Computer=i},188:function(t,e,n){t.exports=n(219)},193:function(t,e,n){},194:function(t,e,n){},195:function(t,e,n){},201:function(t,e,n){},202:function(t,e,n){"use strict";e.__esModule=!0;var o=function(){function t(t){void 0===t&&(t=1/0),this.capacity=t,this.storage=[]}return t.prototype.push=function(t){if(this.size()===this.capacity)throw Error("Stack has reached max capacity, you cannot add more items");this.storage.push(t)},t.prototype.pop=function(){return this.storage.pop()},t.prototype.peek=function(){return this.storage[this.size()-1]},t.prototype.size=function(){return this.storage.length},t.prototype.getStorage=function(){var t=[];return this.storage.forEach(function(e){return t.push(e)}),t},t.prototype.cpyTo=function(t){return this.storage.forEach(function(e){return t.push(e)}),t},t}();e.Stack=o},204:function(t,e,n){},205:function(t,e,n){"use strict";e.__esModule=!0},206:function(t,e,n){},207:function(t,e,n){},208:function(t,e,n){},209:function(t,e,n){},210:function(t,e,n){},211:function(t,e,n){},217:function(t,e,n){},218:function(t,e,n){},219:function(t,e,n){"use strict";n.r(e);var o=n(0),i=n.n(o),r=n(50),s=n.n(r),a=n(24),c=n(25),u=n(38),l=n(37),d=(n(193),n(194),n(156)),p=(n(195),n(271)),f=n(226),m=["visible","title","style","className","children"],h=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this.props,e=t.visible,n=t.title,o=t.style,r=t.className,s=t.children,a=Object(d.a)(t,m);return i.a.createElement(p.a,Object.assign({className:"control-wrapper".concat(e?"":"--hidden"," ").concat(r),variant:"outlined",style:o},a),i.a.createElement("div",{className:"control-wrapper--content"},i.a.createElement("div",null,i.a.createElement(f.a,{variant:"h6"},n)),i.a.createElement("div",{className:"control-wrapper--child"},s)))}}]),n}(i.a.Component);h.defaultProps={visible:!0};var v=h,g=n(265),E=n(263),b=n(267),y=n(274),w=n(272),k=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var o,i,r,s,c;return Object(a.a)(this,n),(c=e.call(this,t)).onLabelChange=function(t){null!==c.props.node&&(c.props.changeNodeLabel(c.props.node.id,t.target.value),c.setState({label:t.target.value}))},c.onIsAdmitChanged=function(t){null!==c.props.node&&(c.props.changeStateIsAdmit(c.props.node.id,t.target.checked),c.setState({isAdmit:t.target.checked},function(){return c.props.reinitComputer()}))},c.onIsInitialChanged=function(t){null===c.props.node||c.props.node.isAdmit||(c.props.changeStateIsInitial(c.props.node.id,t.target.checked),c.setState({isInitial:t.target.checked},function(){return c.props.reinitComputer()}))},c.onDeleteClick=function(){null!==c.props.node&&c.props.deleteNode(c.props.node.id)},c.state={prevNodeId:null===(o=c.props.node)||void 0===o?void 0:o.id,label:(null===(i=c.props.node)||void 0===i?void 0:i.label)||"",isAdmit:(null===(r=c.props.node)||void 0===r?void 0:r.isAdmit)||!1,isInitial:(null===(s=c.props.node)||void 0===s?void 0:s.isInitial)||!1},c}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(t,e){var n,o,i,r,s;(null===(n=this.props.node)||void 0===n?void 0:n.id)!==e.prevNodeId&&this.setState({label:(null===(o=this.props.node)||void 0===o?void 0:o.label)||"",isAdmit:(null===(i=this.props.node)||void 0===i?void 0:i.isAdmit)||!1,isInitial:(null===(r=this.props.node)||void 0===r?void 0:r.isInitial)||!1,prevNodeId:null===(s=this.props.node)||void 0===s?void 0:s.id})}},{key:"render",value:function(){return i.a.createElement(v,{title:"\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435",visible:null!==this.props.node},i.a.createElement(w.a,null,i.a.createElement("div",{className:"node-control__item"},i.a.createElement(E.a,{label:"\u0418\u043c\u044f",size:"small",value:this.state.label,onChange:this.onLabelChange})),i.a.createElement("div",{className:"node-control__item"},i.a.createElement(y.a,{control:i.a.createElement(g.a,{checked:this.state.isInitial,onChange:this.onIsInitialChanged}),label:"\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0435"})),i.a.createElement("div",{className:"node-control__item"},i.a.createElement(y.a,{control:i.a.createElement(g.a,{checked:this.state.isAdmit,onChange:this.onIsAdmitChanged}),label:"\u0414\u043e\u043f\u0443\u0441\u043a\u0430\u044e\u0449\u0435\u0435"})),i.a.createElement("div",{className:"node-control__item"},i.a.createElement(b.a,{onClick:this.onDeleteClick},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))))}}]),n}(i.a.Component),S=n(14),_=n.n(S),C=n(18),P=n(17),x=n(15),N=n(31),O=n(40),A=function(t){return function(e){return e===x.EPS?t:e}},M=function(t){return function(e){return e.map(function(e){return A(t)(e)}).join(":")}},I=function(t){return 0===t?"L":"R"},T=function(t,e){for(var n=function(){var e=0;return void 0!==t&&t.forEach(function(t){t.forEach(function(t){if(void 0!==t.stackDown&&void 0!==t.stackPush){var n=Math.max.apply(Math,Object(P.a)(t.stackPush.map(function(t){return t===x.EPS?0:t.length})).concat([0])),o=t.title===x.EPS?0:t.title.length,i=t.stackDown===x.EPS?0:t.stackDown.length;e=Math.max.apply(Math,Object(P.a)([n,o,i,e].map(function(t){return t})).concat([0]))}})}),e},o="",i=0;i<7*n();i++)o+=" ";var r=A("\u03b5"),s=M("\u03b5"),a=""+(o="tm"===e?"       ":o);return void 0!==t&&("tm"===e?t.forEach(function(t){t.forEach(function(t){void 0!==t.stackDown&&void 0!==t.stackPush&&void 0!==t.move&&(a+=r(t.stackDown)+" | "+s(t.stackPush)+" "+I(t.move)+"\n"+o)})}):"pda"===e||"dpda"===e?t.forEach(function(t){t.forEach(function(t){void 0!==t.title&&t.title.length>0&&void 0!==t.stackDown&&t.stackDown.length>0&&void 0!==t.stackPush&&t.stackPush.length>0&&(a+=r(t.title)+", "+r(t.stackDown)+" | "+s(t.stackPush)+" \n"+o)})}):"dfa"===e||"nfa"===e||"nfa-eps"===e||"moore"===e||"dmoore"===e?t.forEach(function(t){t.forEach(function(t){void 0!==t.title&&t.title.length>0&&(a+=r(t.title)+" \n"+o)})}):"mealy"!==e&&"dmealy"!==e||t.forEach(function(t){t.forEach(function(t){void 0!==t.title&&t.title.length>0&&void 0!==t.output&&(a+=r(t.title)+" | "+t.output+"\n"+o)})})),a},D=function(t,e){var n=A("eps"),o=M("eps"),i="";return void 0!==t&&("tm"===e?t.forEach(function(t){t.forEach(function(t){void 0!==t.stackDown&&void 0!==t.stackPush&&void 0!==t.move&&(i+=n(t.stackDown)+" | "+o(t.stackPush)+">"+I(t.move)+";\n")})}):"pda"===e||"dpda"===e?t.forEach(function(t){t.forEach(function(t){void 0!==t.title&&t.title.length>0&&void 0!==t.stackDown&&t.stackDown.length>0&&void 0!==t.stackPush&&t.stackPush.length>0&&(i+=n(t.title)+", "+n(t.stackDown)+" | "+o(t.stackPush)+";\n")})}):"dfa"===e||"nfa"===e||"nfa-eps"===e||"moore"===e||"dmoore"===e?t.forEach(function(t){t.forEach(function(t){void 0!==t.title&&t.title.length>0&&(i+=n(t.title)+";\n")})}):"mealy"!==e&&"dmealy"!==e||t.forEach(function(t){t.forEach(function(t){void 0!==t.title&&t.title.length>0&&void 0!==t.output&&(i+=n(t.title)+" | "+t.output+";\n")})})),i},j=function(t,e){t.edges.forEach(function(n){t.edges.update({id:n.id,label:T(n.transitions,e)})}),t.nodes.forEach(function(e){var n=e.label.split("").filter(function(t){return" "!==t&&"\n"!==t}).join("").split("|"),o=void 0!==n[1]?n[1]:void 0;e.output=o;var i=e.isInitial?"#0041d0":e.isAdmit?"#ff0072":"#000000",r=e.isCurrent?"#ffff55":"#ffffff",s=1.5,a=2,c=4;t.nodes.update({id:e.id,color:{background:r,border:i,highlight:{border:i,background:r}},borderWidth:e.isInitial||e.isAdmit?a:s,borderWidthSelected:c})})},L=function(t){var e={nodes:new O.a,edges:new O.a};return t.nodes.forEach(function(t){e.nodes.add(t)}),t.edges.forEach(function(t){e.edges.add(t)}),e},K=function(t){var e={nodes:[],edges:[]};return t.nodes.forEach(function(t){e.nodes.push(t)}),t.edges.forEach(function(t){e.edges.push(t)}),e},R={dfa:{name:"\u0414\u041a\u0410",description:"\u041a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u0430\u0442, \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0449\u0438\u0439 \u0438\u043b\u0438 \u043e\u0442\u043a\u043b\u043e\u043d\u044f\u044e\u0449\u0438\u0439 \u0437\u0430\u0434\u0430\u043d\u043d\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",preview:"dfa.png",defaultGraph:{nodes:[{id:1,x:0,y:20,label:"S0",isAdmit:!1,isInitial:!0,isCurrent:!1},{id:2,x:200,y:0,label:"S1",isAdmit:!1,isInitial:!1,isCurrent:!1}],edges:[{from:1,to:2,transitions:new Set([[{title:"0"}]])}]}},nfa:{name:"\u041d\u041a\u0410",description:"\u041c\u043e\u0436\u0435\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\u0445 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e",preview:"nfa.png",defaultGraph:{nodes:[{id:1,x:0,y:0,label:"S0",isAdmit:!1,isInitial:!0,isCurrent:!1},{id:2,x:100,y:100,label:"S1",isAdmit:!1,isInitial:!1,isCurrent:!1},{id:3,x:200,y:200,label:"S2",isAdmit:!1,isInitial:!1,isCurrent:!1},{id:4,x:300,y:300,label:"S3",isAdmit:!0,isInitial:!1,isCurrent:!1}],edges:[{from:1,to:1,transitions:new Set([[{title:"0"},{title:"1"}]])},{from:1,to:2,transitions:new Set([[{title:"0"}]])},{from:2,to:3,transitions:new Set([[{title:"1"}]])},{from:3,to:4,transitions:new Set([[{title:"1"}]])},{from:4,to:4,transitions:new Set([[{title:"0"}]])}]}},"nfa-eps":{name:"\u03b5-\u041d\u041a\u0410",description:"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u041d\u041a\u0410, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u03b5-\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b",preview:"nfa-eps.png",defaultGraph:{nodes:[{id:1,x:0,y:100,label:"S",isAdmit:!1,isInitial:!0,isCurrent:!1},{id:2,x:100,y:100,label:"A1",isAdmit:!1,isInitial:!1,isCurrent:!1},{id:3,x:100,y:200,label:"B1",isAdmit:!1,isInitial:!1,isCurrent:!1},{id:4,x:200,y:100,label:"A2",isAdmit:!1,isInitial:!1,isCurrent:!1},{id:5,x:300,y:100,label:"A3",isAdmit:!1,isInitial:!1,isCurrent:!1},{id:6,x:400,y:100,label:"A4",isAdmit:!0,isInitial:!1,isCurrent:!1},{id:7,x:200,y:200,label:"B2",isAdmit:!1,isInitial:!1,isCurrent:!1},{id:8,x:300,y:200,label:"B3",isAdmit:!1,isInitial:!1,isCurrent:!1},{id:9,x:400,y:200,label:"B4",isAdmit:!0,isInitial:!1,isCurrent:!1}],edges:[{from:1,to:1,transitions:new Set([[{title:"0"},{title:"1"}]])},{from:1,to:2,transitions:new Set([[{title:x.EPS}]])},{from:1,to:3,transitions:new Set([[{title:x.EPS}]])},{from:2,to:4,transitions:new Set([[{title:"0"}]])},{from:4,to:5,transitions:new Set([[{title:"1"}]])},{from:5,to:6,transitions:new Set([[{title:"1"}]])},{from:3,to:7,transitions:new Set([[{title:"0"}]])},{from:7,to:8,transitions:new Set([[{title:"0"}]])},{from:8,to:9,transitions:new Set([[{title:"1"}]])},{from:9,to:9,transitions:new Set([[{title:"0"},{title:"1"}]])},{from:6,to:6,transitions:new Set([[{title:"0"},{title:"1"}]])}]}},pda:{name:"\u0410\u0432\u0442\u043e\u043c\u0430\u0442 \u0441 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u044c\u044e",description:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0441\u0442\u0435\u043a \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439",preview:"pda.png",defaultGraph:{nodes:[{id:1,x:0,y:0,label:"S0",isAdmit:!1,isInitial:!0,isCurrent:!1},{id:2,x:100,y:0,label:"S1",isAdmit:!1,isInitial:!1,isCurrent:!1},{id:3,x:200,y:0,label:"S2",isAdmit:!1,isInitial:!1,isCurrent:!1}],edges:[{from:1,to:1,transitions:new Set([[{title:"0",stackDown:"Z0",stackPush:["0","Z0"]},{title:"1",stackDown:"Z0",stackPush:["1","Z0"]},{title:"0",stackDown:"0",stackPush:["0","0"]},{title:"0",stackDown:"1",stackPush:["0","1"]},{title:"1",stackDown:"0",stackPush:["1","0"]},{title:"1",stackDown:"1",stackPush:["1","1"]}]])},{from:1,to:2,transitions:new Set([[{title:x.EPS,stackDown:"Z0",stackPush:["Z0"]},{title:x.EPS,stackDown:"0",stackPush:["0"]},{title:x.EPS,stackDown:"1",stackPush:["1"]}]])},{from:2,to:2,transitions:new Set([[{title:"0",stackDown:"0",stackPush:[x.EPS]},{title:"1",stackDown:"1",stackPush:[x.EPS]}]])},{from:2,to:3,transitions:new Set([[{title:x.EPS,stackDown:"Z0",stackPush:[x.EPS]}]])}]}},dpda:{name:"\u0414\u0435\u0442\u0435\u0440\u043c\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u0430\u0442 \u0441 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u044c\u044e",description:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0441\u0442\u0435\u043a \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439",preview:"pda.png",defaultGraph:{nodes:[{id:1,x:0,y:0,label:"S0",isAdmit:!1,isInitial:!0,isCurrent:!1}],edges:[{from:1,to:1,transitions:new Set([[{title:"0",stackDown:"Z0",stackPush:["0","Z0"]}]])}]}},tm:{name:"\u041c\u0430\u0448\u0438\u043d\u0430 \u0422\u044c\u044e\u0440\u0438\u043d\u0433\u0430",description:"_",preview:"tm.png",defaultGraph:{nodes:[{id:1,x:0,y:0,label:"S0",isAdmit:!1,isInitial:!0,isCurrent:!1},{id:2,x:200,y:0,label:"S1",isAdmit:!1,isInitial:!1,isCurrent:!1},{id:3,x:0,y:200,label:"S2",isAdmit:!0,isInitial:!1,isCurrent:!1},{id:4,x:200,y:200,label:"S3",isAdmit:!0,isInitial:!1,isCurrent:!1}],edges:[{from:1,to:1,transitions:new Set([[{title:x.EPS,stackDown:"0",stackPush:["0"],move:N.Move.R},{title:x.EPS,stackDown:"1",stackPush:["1"],move:N.Move.R}]])},{from:1,to:2,transitions:new Set([[{title:x.EPS,stackDown:"_",stackPush:["_"],move:N.Move.L}]])},{from:2,to:2,transitions:new Set([[{title:x.EPS,stackDown:"1",stackPush:["0"],move:N.Move.L}]])},{from:2,to:3,transitions:new Set([[{title:x.EPS,stackDown:"0",stackPush:["1"],move:N.Move.L}]])},{from:2,to:4,transitions:new Set([[{title:x.EPS,stackDown:"_",stackPush:["1"],move:N.Move.L}]])}]}},mealy:{name:"\u0410\u0432\u0442\u043e\u043c\u0430\u0442 \u041c\u0438\u043b\u0438",preview:"mealy.png",description:"_",defaultGraph:{nodes:[{x:0,y:0,id:0,isAdmit:!1,isCurrent:!1,isInitial:!0,label:"0 rub"},{x:300,y:-200,id:1,isAdmit:!1,isCurrent:!1,isInitial:!1,label:"5 rub"},{x:500,y:-300,id:2,isAdmit:!1,isCurrent:!1,isInitial:!1,label:"15 rub"},{x:-100,y:-500,id:3,isAdmit:!1,isCurrent:!1,isInitial:!1,label:"10 rub"}],edges:[{from:0,to:1,transitions:new Set([[{title:"f",output:"n"}]])},{from:0,to:3,transitions:new Set([[{title:"t",output:"n"}]])},{from:1,to:2,transitions:new Set([[{title:"t",output:"n"}]])},{from:1,to:3,transitions:new Set([[{title:"f",output:"n"}]])},{from:2,to:0,transitions:new Set([[{title:"f",output:"0"},{title:"t",output:"5"}]])},{from:3,to:2,transitions:new Set([[{title:"f",output:"n"}]])},{from:3,to:0,transitions:new Set([[{title:"t",output:"0"}]])}]}},dmealy:{name:"\u0414\u0435\u0442\u0435\u0440\u043c\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u0430\u0442 \u041c\u0438\u043b\u0438",preview:"mealy.png",description:"_",defaultGraph:{nodes:[{x:0,y:0,id:0,isAdmit:!1,isCurrent:!1,isInitial:!0,label:"0 rub"},{x:-100,y:-500,id:3,isAdmit:!1,isCurrent:!1,isInitial:!1,label:"10 rub"}],edges:[{from:0,to:0,transitions:new Set([[{title:"f",output:"n"}]])},{from:0,to:3,transitions:new Set([[{title:"f",output:"n"}]])}]}},moore:{name:"\u0410\u0432\u0442\u043e\u043c\u0430\u0442 \u041c\u0443\u0440\u0430",description:"_",preview:"moore.png",defaultGraph:{nodes:[{x:0,y:0,id:0,isAdmit:!1,isCurrent:!1,isInitial:!0,label:"S0 | b"},{x:300,y:0,id:1,isAdmit:!1,isCurrent:!1,isInitial:!1,label:"S1 | b"},{x:100,y:100,id:2,isAdmit:!1,isCurrent:!1,isInitial:!1,label:"S2 | a"}],edges:[{from:0,to:0,transitions:new Set([[{title:"1"}]])},{from:0,to:1,transitions:new Set([[{title:"0"}]])},{from:1,to:1,transitions:new Set([[{title:"0"}]])},{from:1,to:2,transitions:new Set([[{title:"1"}]])},{from:2,to:1,transitions:new Set([[{title:"0"}]])},{from:2,to:0,transitions:new Set([[{title:"1"}]])}]}},dmoore:{name:"\u0414\u0435\u0442\u0435\u0440\u043c\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u0430\u0442 \u041c\u0443\u0440\u0430",description:"_",preview:"moore.png",defaultGraph:{nodes:[{x:0,y:0,id:0,isAdmit:!1,isCurrent:!1,isInitial:!0,label:"S0 | b"},{x:300,y:0,id:1,isAdmit:!1,isCurrent:!1,isInitial:!1,label:"S1 | b"},{x:100,y:100,id:2,isAdmit:!1,isCurrent:!1,isInitial:!1,label:"S2 | a"}],edges:[{from:0,to:0,transitions:new Set([[{title:"1"}]])},{from:0,to:1,transitions:new Set([[{title:"0"}]])},{from:1,to:1,transitions:new Set([[{title:"0"}]])},{from:1,to:2,transitions:new Set([[{title:"1"}]])},{from:2,to:1,transitions:new Set([[{title:"0"}]])},{from:2,to:0,transitions:new Set([[{title:"1"}]])}]}}},z=function(t){var e,n="; ".concat(document.cookie).split("; ".concat(t,"="));if(2===n.length)return null===(e=n.pop())||void 0===e?void 0:e.split(";").shift()},H=(n(201),n(139)),F=n.n(H),B=function(t){return function(e){return i.a.createElement(se.Consumer,null,function(n){return i.a.createElement(t,Object.assign({computerType:n},e))})}},U=B(function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var o,i,r,s,c;return Object(a.a)(this,n),(c=e.call(this,t)).selectTransition=function(t){c.state.activeTransition===t?c.setState({activeTransition:null}):c.setState({activeTransition:t})},c.changeTransitions=function(){var t=Object(C.a)(_.a.mark(function t(e){var n,o,i,r;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.target.value,c.setState({transitionsText:n}),o=[],i=[],"tm"===c.props.computerType&&c.state.transitionsText.split("").filter(function(t){return" "!==t&&"\n"!==t}).join("").split(";").forEach(function(t){var e,n=t.split(""),i=n.shift(),r=n=n.join("").split("|"),s=n.join("").split(">");s.reverse(),e=s.shift(),s.reverse(),r=s,o.push({fst:x.EPS,snd:i,trd:r.join(":"),fth:e})}),"mealy"===c.props.computerType||"dmealy"===c.props.computerType?(c.state.transitionsText.split("").filter(function(t){return" "!==t&&"\n"!==t}).join("").split(";").forEach(function(t){var e=t.split("|"),n=e.shift(),i=e.shift();o.push({fst:n,snd:i,trd:void 0,fth:void 0})}),o.forEach(function(t){void 0!==t.fst&&i.push({title:"eps"===t.fst?x.EPS:t.fst,output:t.snd})})):(c.state.transitionsText.split("").filter(function(t){return" "!==t&&"\n"!==t}).join("").split(";").forEach(function(t){var e=t.split(","),n=e.shift(),i=(e=e.join("").split("|")).shift(),r=e;o.push({fst:n,snd:i,trd:r.join(":"),fth:void 0})}),o.forEach(function(t){var e;void 0!==t.fst&&i.push({title:"eps"===t.fst?x.EPS:t.fst,stackDown:"eps"===t.snd?x.EPS:t.snd,stackPush:null===(e=t.trd)||void 0===e?void 0:e.split(":").map(function(t){return"eps"===t?x.EPS:t}),move:"L"===t.fth?N.Move.L:"R"===t.fth?N.Move.R:void 0})})),r=new Set([i]),c.props.changeEdgeTransitions(c.props.edge.id,r),console.log("ALLLOO"),c.setState({transitionsText:n,transitions:r},function(){return c.props.reinitComputer()});case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),c.deleteEdge=Object(C.a)(_.a.mark(function t(){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return null!==c.props.edge&&c.props.deleteEdge(c.props.edge.id),t.next=3,c.props.reinitComputer();case 3:case"end":return t.stop()}},t)})),c.changeEditMode=function(){c.setState({editMode:!c.state.editMode}),c.updateTransitions()},c.updateTransitions=Object(C.a)(_.a.mark(function t(){var e,n,o;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],"tm"===c.props.computerType&&c.state.transitionsText.split("").filter(function(t){return" "!==t&&"\n"!==t}).join("").split(";").forEach(function(t){var n,o=t.split(""),i=o.shift(),r=o=o.join("").split("|"),s=o.join("").split(">");s.reverse(),n=s.shift(),s.reverse(),r=s,console.log("tmp"),console.log(s),e.push({fst:x.EPS,snd:i,trd:r.join(":"),fth:n,out:void 0})}),"mealy"===c.props.computerType||"dmealy"===c.props.computerType?c.state.transitionsText.split("").filter(function(t){return" "!==t&&"\n"!==t}).join("").split(";").forEach(function(t){var n=t.split("|"),o=n.shift(),i=n.shift();e.push({fst:o,snd:void 0,trd:void 0,fth:void 0,out:i})}):c.state.transitionsText.split("").filter(function(t){return" "!==t&&"\n"!==t}).join("").split(";").forEach(function(t){var n=t.split(","),o=n.shift(),i=(n=n.join("").split("|")).shift(),r=n;e.push({fst:o,snd:i,trd:r.join(":"),fth:void 0,out:void 0})}),n=[],e.forEach(function(t){var e;void 0!==t.fst&&n.push({title:"eps"===t.fst?x.EPS:t.fst,stackDown:"eps"===t.snd?x.EPS:t.snd,stackPush:null===(e=t.trd)||void 0===e?void 0:e.split(":").map(function(t){return"eps"===t?x.EPS:t}),move:"L"===t.fth?N.Move.L:"R"===t.fth?N.Move.R:void 0,output:t.out})}),o=new Set([n]),c.setState({transitionsText:D(o,c.props.computerType),transitions:o}),t.next=9,c.props.reinitComputer();case 9:case"end":return t.stop()}},t)})),c.deleteTransition=function(){if(null!==c.props.edge&&null!==c.state.activeTransition){var t=c.state.transitions;t.delete(c.state.activeTransition),c.props.changeEdgeTransitions(c.props.edge.id,t),c.setState({transitions:t,transitionsText:D(t,c.props.computerType)})}},c.state={prevEdgeId:null===(o=c.props.edge)||void 0===o?void 0:o.id,transitions:(null===(i=c.props.edge)||void 0===i?void 0:i.transitions)||new Set,transitionsText:D((null===(r=c.props.edge)||void 0===r?void 0:r.transitions)||new Set,c.props.computerType),displayedTransitionText:D((null===(s=c.props.edge)||void 0===s?void 0:s.transitions)||new Set,c.props.computerType),activeTransition:null,editMode:!1,countRules:1,rules:[{id:1,value:" "}]},c}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(t,e){var n,o,i,r;(null===(n=this.props.edge)||void 0===n?void 0:n.id)!==e.prevEdgeId&&this.setState({transitions:(null===(o=this.props.edge)||void 0===o?void 0:o.transitions)||new Set,prevEdgeId:null===(i=this.props.edge)||void 0===i?void 0:i.id,transitionsText:D((null===(r=this.props.edge)||void 0===r?void 0:r.transitions)||new Set,this.props.computerType),activeTransition:null,editMode:!1})}},{key:"addInstruction",value:function(t){var e={id:this.state.rules.length,value:t};this.setState({rules:this.state.rules.concat(e)})}},{key:"render",value:function(){return i.a.createElement(v,{title:"\u041f\u0435\u0440\u0435\u0445\u043e\u0434",visible:null!==this.props.edge},i.a.createElement("div",{className:"edge-control__container"},i.a.createElement("div",{className:"edge-control__item edge-control__transitions"},i.a.createElement(E.a,{id:"filled-multiline-static",multiline:!0,rows:3,variant:"standard",label:"\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u044b",size:"small",value:this.state.transitionsText,onChange:this.changeTransitions,helperText:(this.props.computerType,'\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0438\u043b\u0438 "eps" \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e'),onBlur:this.updateTransitions}),i.a.createElement("div",{className:"edge-control__edit-transitions",onClick:this.changeEditMode},i.a.createElement(F.a,null))),i.a.createElement("div",{className:"edge-control__item"},i.a.createElement(b.a,{onClick:this.deleteEdge},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))))}}]),n}(i.a.Component)),V=n(140),G=n(117),J=n(141),W=(n(204),n(146)),Z=n.n(W),X=n(147),Y=n.n(X),q=n(262),Q=n(87),$=n(69),tt=n(142),et=n(118),nt=n(119),ot=n(34),it=n(143),rt=n(144),st=n(145),at=B(function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var o;return Object(a.a)(this,n),(o=e.call(this,t)).historyEndRef=i.a.createRef(),o.computerShouldBeUpdated=function(t,e){return t.edges.length!==e.edges.length||t.edges.some(function(t,n){var o=e.edges[n];return t.id!==o.id||t.from!==o.from||t.to!==o.to||!Object(G.isEqual)(o.transitions,t.transitions)})||t.nodes.length!==e.nodes.length||t.nodes.some(function(t,n){var o=e.nodes[n];return t.id!==o.id||t.isAdmit!==o.isAdmit||t.isInitial!==o.isInitial})},o.getComputer=function(t,e,n,i){switch(t){case"dfa":try{return new V.DFA(e,n,i)}catch(r){return}case"nfa":return new J.NFA(e,n,i);case"nfa-eps":return new Q.EpsilonNFA(e,n,i);case"pda":return new $.PDA(e,n,i,o.state.byEmptyStack);case"dpda":return new it.DPDA(e,n,i,o.state.byEmptyStack);case"tm":return new tt.TM(e,n,i);case"mealy":return new et.Mealy(e,n,i);case"dmealy":return new rt.DMealy(e,n,i);case"moore":return new nt.Moore(e,n,i);case"dmoore":return new st.DMoore(e,n,i)}},o.initializeComputer=function(){console.warn("Reinitializing computer"),o.setState({gElements:K(o.props.elements)},function(){o.props.resetHistTree();var t=K(o.props.elements).nodes.filter(function(t){return t.isInitial}),e=o.state.input.split("");void 0!==t?(console.log("this.state.gElementshis.state.gElementshis.state.gElements"),console.log(o.state.gElements),o.setState({computer:o.getComputer(o.props.computerType,o.state.gElements,t,e),result:void 0},Object(C.a)(_.a.mark(function t(){var e;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],(void 0!==o.state.computer?o.state.computer.getStartStatements():[]).map(function(t){return o.state.gElements.nodes.find(function(e){return e.id===t.id})}).filter(function(t){return void 0!==t}).forEach(function(t){o.props.createHistNode(t.id,t.label,t.isAdmit,t.isInitial,t.isCurrent),e.push({id:o.props.getLastHistNodeId(),idd:t.id})}),console.log("OOOOOOOOOOOO"),console.log(e.length),e.map(function(t){return o.state.gElements.nodes.find(function(e){return e.id===t.idd})}).filter(function(t){return void 0!==t}).forEach(function(t){return console.log(t.label)}),console.log("OOOOOOOOOOOO"),t.next=9,o.setState({lastHistUnits:e});case 9:case"end":return t.stop()}},t)})))):console.warn("There is no initial node. Computer will not be initialized")}),console.log("::::::::::::::::::::::>"),o.props.elements.edges.forEach(function(t){console.log(t.from+" -- "+t.to),t.transitions.forEach(function(t){return console.log(t)})})},o.onInputChanged=function(t){var e,n=t.target.value;o.reset(),null===(e=o.state.computer)||void 0===e||e.setInput(n.split("")),o.setState({input:n})},o.step=Object(C.a)(_.a.mark(function t(){var e,n,i,r,s,a,c,u,l,d,p,f;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==o.state.computer){t.next=3;break}return console.error("Computer is not initialized yet"),t.abrupt("return");case 3:if(o.props.setResettedStatus(!0),!o.state.wasRuned){t.next=9;break}return o.setState({wasRuned:!1}),o.reset(),t.next=9,o.props.resetHistTree();case 9:if(o.state.currentInputIndex!==o.state.input.length-1||"tm"===o.props.computerType){t.next=11;break}return t.abrupt("return");case 11:if(void 0===o.state.result||-1===o.state.currentInputIndex||"tm"===o.props.computerType){t.next=13;break}return t.abrupt("return");case 13:if(t.prev=13,0!==(e=o.state.computer.step()).nodes.length){t.next=17;break}return t.abrupt("return");case 17:o.props.changeStateIsCurrent(e.nodes.map(function(t){return t.id}),!0),o.props.updMem(e.memory,e.pointer),n=void 0,e.counter===o.state.input.length?n=e.isAdmit:o.state.currentInputIndex+2!==e.counter&&(n=!1),i=e.nodes.map(function(t){return o.state.gElements.nodes.find(function(e){return e.id===t.id})}).filter(function(t){return void 0!==t}),r=[],s=e.byEpsPred?e.byEpsPred:[],a=e.byLetter?e.byLetter:[],c=e.byEpsAfter?e.byEpsAfter:[],u=new Map,l=function(){var t=Object(C.a)(_.a.mark(function t(){var e,n;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.map(function(t){return o.state.gElements.nodes.find(function(e){return e.id===t.id})}).filter(function(t){return void 0!==t}).forEach(function(t){var e;console.log("v.from?.id, v.id"),console.log(null===(e=t.from)||void 0===e?void 0:e.id,t.id),o.props.createHistNode(t.id,t.label,t.isAdmit,t.isInitial,t.isCurrent),r.push({id:o.props.getLastHistNodeId(),idd:t.id}),u.set(t.id,t.label),console.log("----------\x3e"+t.label)}),s.reduce(function(t,e){if(o.state.lastHistUnits.filter(function(t){return e.from&&e.from.id===t.idd}).length>0){var n=o.state.lastHistUnits.filter(function(t){return e.from&&e.from.id===t.idd})[0].id,i=r.filter(function(t){return e.id===t.idd}).map(function(t){return t.id});i.includes(n)||t.push({from:n,to:i,by:e.by})}return t},[]).forEach(function(t){return t.to.forEach(function(e){return o.props.createHistEdge(t.from,e,t.by)})}),o.setState({lastHistUnits:r}),console.log("*"),r.forEach(function(t){return console.log(t.id,u.get(t.idd))}),console.log("*"),console.log("byLetter"),o.state.lastHistUnits.forEach(function(t){return console.log(t.id,u.get(t.idd))}),console.log("byLetter"),e=[],a.map(function(t){return o.state.gElements.nodes.find(function(e){return e.id===t.id})}).filter(function(t){return void 0!==t}).forEach(function(t){o.props.createHistNode(t.id,t.label,t.isAdmit,t.isInitial,t.isCurrent),e.push({id:o.props.getLastHistNodeId(),idd:t.id}),u.set(t.id,t.label)}),a.reduce(function(t,n){if(r.filter(function(t){return n.from&&n.from.id===t.idd}).length>0){var o=r.filter(function(t){return n.from&&n.from.id===t.idd})[0].id,i=e.filter(function(t){return n.id===t.idd}).map(function(t){return t.id});t.push({from:o,to:i,by:n.by})}return t},[]).forEach(function(t){return t.to.forEach(function(e){return o.props.createHistEdge(t.from,e,t.by)})}),t.next=16,o.setState({lastHistUnits:e});case 16:return console.log("byEpsAfter"),o.state.lastHistUnits.forEach(function(t){return console.log(t.id,u.get(t.idd))}),console.log("byEpsAfter"),n=[],c.map(function(t){return o.state.gElements.nodes.find(function(e){return e.id===t.id})}).filter(function(t){return void 0!==t}).forEach(function(t){o.props.createHistNode(t.id,t.label,t.isAdmit,t.isInitial,t.isCurrent),n.push({id:o.props.getLastHistNodeId(),idd:t.id}),u.set(t.id,t.label)}),c.reduce(function(t,o){if(e.filter(function(t){return o.from&&o.from.id===t.idd}).length>0){var i=e.filter(function(t){return o.from&&o.from.id===t.idd})[0].id,r=n.filter(function(t){return o.id===t.idd}).map(function(t){return t.id});t.push({from:i,to:r,by:o.by})}return t},[]).forEach(function(t){return t.to.forEach(function(e){return o.props.createHistEdge(t.from,e,t.by)})}),t.next=25,o.setState({lastHistUnits:n});case 25:console.log("___"),o.state.lastHistUnits.forEach(function(t){return console.log(t.id,u.get(t.idd))}),console.log("___");case 28:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),d=function(){var t=Object(C.a)(_.a.mark(function t(){var e;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("*"),o.state.lastHistUnits.forEach(function(t){return console.log(t.id,u.get(t.idd))}),console.log("*"),console.log("byLetter"),o.state.lastHistUnits.forEach(function(t){return console.log(t.id,u.get(t.idd))}),console.log("byLetter"),e=[],a.map(function(t){return o.state.gElements.nodes.find(function(e){return e.id===t.id})}).filter(function(t){return void 0!==t}).forEach(function(t){o.props.createHistNode(t.id,t.label,t.isAdmit,t.isInitial,t.isCurrent),e.push({id:o.props.getLastHistNodeId(),idd:t.id}),u.set(t.id,t.label)}),a.reduce(function(t,n){if(o.state.lastHistUnits.filter(function(t){return n.from&&n.from.id===t.idd}).length>0){var i=o.state.lastHistUnits.filter(function(t){return n.from&&n.from.id===t.idd})[0].id,r=e.filter(function(t){return n.id===t.idd}).map(function(t){return t.id});t.push({from:i,to:r,by:n.by})}return t},[]).forEach(function(t){return t.to.forEach(function(e){return o.props.createHistEdge(t.from,e,t.by)})}),t.next=12,o.setState({lastHistUnits:e});case 12:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),o.state.computer.haveEpsilon()?l():d(),p=i.map(function(t,n){var o=e.nodes[n].stack;return{a:t,b:void 0!==o?o.reverse():void 0!==e.output?e.output:void 0}}),"moore"===o.props.computerType&&1===e.counter&&(f=[{a:o.state.gElements.nodes.filter(function(t){return t.id===o.state.computer.getCurrNode()})[0],b:["~"]}],console.log(f),o.setState({startNode:o.state.gElements.nodes.filter(function(t){return t.id===o.state.computer.getCurrNode()})[0]})),o.setState({result:n,currentInputIndex:o.state.currentInputIndex+1,history:[].concat(Object(P.a)(o.state.history),[p]),memory:e.memory},function(){var t,e;return null===(t=o.historyEndRef)||void 0===t?void 0:null===(e=t.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})}),t.next=38;break;case 35:t.prev=35,t.t0=t.catch(13),t.t0 instanceof ot.NonDeterministic?(o.props.setIsNonDetermenistic(!0),console.error("KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK"),console.log("NonDeterministic")):console.log(t.t0);case 38:case"end":return t.stop()}},t,null,[[13,35]])})),o.reset=function(){var t,e;null===(t=o.state.computer)||void 0===t||t.restart(),o.props.changeStateIsCurrent([],!0),o.setState({result:void 0,currentInputIndex:-1,history:[]},function(){o.initializeComputer()}),null===(e=o.state.computer)||void 0===e||e.setInput(o.state.input.split("")),o.props.setResettedStatus(!1),o.props.resetHistTree()},o.run=Object(C.a)(_.a.mark(function t(){var e;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==o.state.computer){t.next=3;break}return console.error("Computer is not initialized yet"),t.abrupt("return");case 3:return t.next=5,o.reset();case 5:try{e=o.state.computer.run(),o.setState({result:e.isAdmit,currentInputIndex:-1,history:[]}),o.setState({wasRuned:!0})}catch(n){n instanceof ot.NonDeterministic&&(o.props.setIsNonDetermenistic(!0),console.error("KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK"),console.log("NonDeterministic"))}case 6:case"end":return t.stop()}},t)})),o.nfaToDfa=function(){var t=o.state.computer.nfaToDfa(),e={nodes:t.nodes.map(function(t,e){return{id:t.id,isAdmit:t.isAdmit,label:t.id.toString(),isInitial:0===e,isCurrent:!1}}),edges:t.edges};o.setState({gElements:e},function(){o.props.updateElements(L(e)),o.props.setComputerType("dfa")})},o.admitByStack=function(){var t=o.state.byEmptyStack;o.setState({byEmptyStack:!t}),o.props.setByEmptyStack(!t),o.state.computer.byEmptyStackAdmt(!t),o.reset()},o.minimizeDfa=function(){o.initializeComputer(),o.reset();try{var t=o.state.computer.minimizeDfa(),e={nodes:t.graphcore.nodes.map(function(e){return{id:e.id,isAdmit:e.isAdmit,label:"G"+e.id.toString(),isInitial:e.id===t.start.id,isCurrent:!1}}),edges:t.graphcore.edges};o.setState({gElements:e},function(){o.props.updateElements(L(e))})}catch(n){n instanceof ot.NonMinimizable&&(o.props.setIsNonMinimizable(!0),console.error("KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK"),console.log("NonDeterministic"))}},o.mooreToMealy=function(){o.initializeComputer(),o.reset();var t=o.state.computer.mooreToMealy(),e=t.start.map(function(t){return t.id}),n={nodes:t.graphcore.nodes.map(function(t){return{id:t.id,isAdmit:t.isAdmit,label:"S"+t.id.toString(),isInitial:e.includes(t.id),isCurrent:!1}}),edges:t.graphcore.edges};o.setState({gElements:n},function(){o.props.updateElements(L(n)),o.props.setComputerType("mealy")})},o.mealyToMoore=function(){o.initializeComputer(),o.reset();var t=o.state.computer.mealyToMoore(),e=t.start.map(function(t){return t.id}),n={nodes:t.graphcore.nodes.map(function(t){return{id:t.id,isAdmit:t.isAdmit,label:"S"+t.id.toString()+" | "+t.output,isInitial:e.includes(t.id),isCurrent:!1}}),edges:t.graphcore.edges};o.setState({gElements:n},function(){o.props.updateElements(L(n)),o.props.setComputerType("moore")})},o.state={input:"",result:void 0,computer:void 0,editMode:!0,currentInputIndex:-1,history:[],byEmptyStack:!1,wasRuned:!1,memory:void 0,gElements:K(o.props.elements),startNode:void 0,lastHistUnits:[],startStatements:[]},o}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.props.setInit(function(){var e=!1;if(t.props.elements.edges.forEach(function(t){""===t.label&&(e=!0)}),!e)return t.initializeComputer()}),this.props.setNfaToDfa(this.nfaToDfa),this.props.setMinimizeDfa(this.minimizeDfa),this.props.setMooreToMealy(this.mooreToMealy),this.props.setMealyToMoore(this.mealyToMoore),this.props.setChangerByStack(this.admitByStack),this.props.setRun(this.run),this.props.setStep(this.step),this.props.setReset(this.reset),this.initializeComputer()}},{key:"componentDidUpdate",value:function(t,e,n){this.computerShouldBeUpdated(K(t.elements),K(this.props.elements))&&this.initializeComputer()}},{key:"render",value:function(){var t=this;return i.a.createElement(v,{title:"\u0417\u0430\u043f\u0443\u0441\u043a"},i.a.createElement("div",null,i.a.createElement("div",{className:"run-control__item run-control__input__row"},this.state.editMode?i.a.createElement(E.a,{label:"\u0412\u0445\u043e\u0434\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430",size:"small",value:this.state.input,onChange:this.onInputChanged,onBlur:function(){t.state.input.length&&t.setState({editMode:!1},function(){return t.initializeComputer()})}}):i.a.createElement("div",{className:"run-control__input-value",onClick:function(){t.setState({editMode:!0})}},Array.from(this.state.input).map(function(e,n){return i.a.createElement("span",{className:"run-control__input__span"+(t.state.currentInputIndex===n?"--current":""),key:n},e)})),i.a.createElement("div",{className:"run-control__result"},void 0===this.state.result?null:this.state.result?i.a.createElement(Z.a,{style:{color:"var(--commerce)"}}):i.a.createElement(Y.a,{style:{color:"var(--destructive)"}}))),i.a.createElement("div",{className:"run-control__item run-control__buttons"},i.a.createElement("div",{className:"run-control__button"},i.a.createElement(b.a,{variant:"outlined",onClick:this.step},"\u0428\u0430\u0433")),"tm"!==this.props.computerType?i.a.createElement("div",{className:"run-control__button"},i.a.createElement(b.a,{variant:"outlined",onClick:this.run},"\u0417\u0430\u043f\u0443\u0441\u043a")):i.a.createElement(i.a.Fragment,null),i.a.createElement("div",{className:"run-control__button"},i.a.createElement(b.a,{variant:"outlined",onClick:this.reset},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"))),i.a.createElement("div",{className:"run-control__item run-control__history"},i.a.createElement("div",{className:"run-control__history__header"},i.a.createElement(f.a,{variant:"h6"},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f")),0!==this.state.history.length?i.a.createElement("div",{className:"run-control__history__scroll"},void 0!==this.state.startNode?i.a.createElement("div",{className:"run-control__history__row",key:0},i.a.createElement("span",{className:"run-control__history__index"},0),i.a.createElement(q.a,{title:i.a.createElement(f.a,{className:"display-linebreak"},"~")},i.a.createElement("div",{className:"run-control__history__node",style:{border:"".concat(this.state.startNode.isInitial?"#0041d0":this.state.startNode.isAdmit?"#ff0072":"#000000"," 2px solid")}},this.state.startNode.label))):i.a.createElement("div",null),this.state.history.map(function(t,e){return i.a.createElement("div",{className:"run-control__history__row",key:e},i.a.createElement("span",{className:"run-control__history__index"},e+1),t.map(function(t,e){return i.a.createElement(q.a,{title:i.a.createElement(f.a,{className:"display-linebreak"},void 0!==t.b?t.b.join("\n"):"")},i.a.createElement("div",{className:"run-control__history__node",style:{border:"".concat(t.a.isInitial?"#0041d0":t.a.isAdmit?"#ff0072":"#000000"," 2px solid")}},t.a.label))}))}),i.a.createElement("div",{ref:this.historyEndRef})):i.a.createElement("div",{className:"run-control__history__placeholder"},"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u043e\u0448\u0430\u0433\u043e\u0432\u044b\u0439 \u0437\u0430\u043f\u0443\u0441\u043a, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0431\u043b\u044e\u0434\u0430\u0442\u044c \u0437\u0430 \u0438\u0441\u0442\u043e\u0440\u0438\u0435\u0439"))))}}]),n}(i.a.Component)),ct=n(11),ut=(n(205),function(){function t(){Object(a.a)(this,t)}return Object(c.a)(t,[{key:"getSavesMeta",value:function(){var e=t.getSaves();return new Promise(function(t){t(e)})}},{key:"getSave",value:function(e){var n=t.getSaves().find(function(t){return t.id==e.id});return new Promise(function(t){t(n||null)})}},{key:"save",value:function(e,n,o){if(!localStorage)throw new Error("no local storage");var i=t.getSaves(),r=Math.max.apply(Math,Object(P.a)(i.map(function(t){return t.id})))+1,s=i.findIndex(function(t){return t.name==e}),a={id:0,name:e,save:{graph:n,type:o},user_id:"local"};-1==s?(a.id=r,i.push(a)):(a.id=i[s].id,i[s]=a);var c=JSON.stringify(i,function(t,e){return e instanceof Set?Array.from(e):e});return localStorage.setItem("saves",c),new Promise(function(t){t()})}}],[{key:"getSaves",value:function(){if(!localStorage)throw new Error("no local storage");var t=[];try{t=JSON.parse(localStorage.getItem("saves")||"")}catch(e){return console.warn("Invalid saves in local storage: "+e),[]}return t}}]),t}()),lt=new URL(null!=="https://sscss.ru"?"https://sscss.ru":"http://localhost"),dt=null!=="2101"?"2101":"8001",pt=null!=="2102"?"2102":"8002",ft=null!=="2103"?"2103":"8003";function mt(){var t=new Headers;return t.set("tt","g"),t.set("t",z("token")||""),t}function ht(t){return{method:"GET",headers:t}}function vt(t){return new Promise(function(e,n){var o=lt;o.port=ft,o.pathname="/saves";var i=ht(mt());fetch(o.href,i).then(function(e){if(401==e.status&&t(),!e.ok)throw new Error(e.status+e.statusText);return e.json()}).then(function(t){return e(t)}).catch(function(t){return n(t)})})}function gt(t,e){return new Promise(function(n,o){var i=lt;i.port=ft,i.pathname="/saves";var r=JSON.stringify(t),s=function(t,e){return t.set("Content-Type","application/json"),{method:"POST",headers:t,body:e}}(mt(),r);fetch(i.href,s).then(function(t){if(401==t.status&&e(),!t.ok)throw new Error(t.status+t.statusText);n()}).catch(function(t){return o(t)})})}function Et(t,e){return new Promise(function(n,o){var i=lt;i.port=ft,i.pathname="/saves",i.pathname+="/"+t.id;var r=ht(mt());fetch(i.href,r).then(function(t){if(401==t.status&&e(),!t.ok)throw new Error(t.status+t.statusText);return t.json()}).then(function(t){return n(t)}).catch(function(t){return o(t)})})}var bt=function(){function t(e){Object(a.a)(this,t),this.onAuthFailed=void 0,this.onAuthFailed=e}return Object(c.a)(t,[{key:"getSave",value:function(){var t=Object(C.a)(_.a.mark(function t(e){var n,o,i;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:e.id},o=null,t.prev=2,t.next=5,Et(n,this.onAuthFailed);case 5:i=t.sent,o={id:i.id,name:i.name,save:JSON.parse(i.save),user_id:i.user_id},t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0);case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}},t,this,[[2,9]])}));return function(e){return t.apply(this,arguments)}}()},{key:"getSavesMeta",value:function(){var t=Object(C.a)(_.a.mark(function t(){var e;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.prev=1,t.next=4,vt(this.onAuthFailed);case 4:e=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0);case 10:return t.abrupt("return",e);case 11:case"end":return t.stop()}},t,this,[[1,7]])}));return function(){return t.apply(this,arguments)}}()},{key:"save",value:function(){var t=Object(C.a)(_.a.mark(function t(e,n,o){var i,r;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=JSON.stringify({graph:n,type:o},function(t,e){return e instanceof Set?Array.from(e):e}),r={name:e,save:i},t.prev=2,t.next=5,gt(r,this.onAuthFailed);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[2,7]])}));return function(e,n,o){return t.apply(this,arguments)}}()}]),t}(),yt=n(275),wt=n(260),kt=n(276),St=n(273),_t=n(266),Ct=n(277),Pt=n(278),xt=n(268),Nt=n(148),Ot=n.n(Nt),At=(n(206),n(284)),Mt=function(t){var e=t.open,n=t.onClose,r=t.onAuthFailed,s=t.changeComputerType,a=new ut,c=new bt(r),u=function(){var t=Object(C.a)(_.a.mark(function t(e){var o;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.getSave(e);case 2:(o=t.sent)&&(s(o.save.type,o.save.graph),n());case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(C.a)(_.a.mark(function t(e){var o;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getSave(e);case 2:(o=t.sent)&&(s(o.save.type,o.save.graph),n());case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(C.a)(_.a.mark(function t(){var e;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return N(!0),t.next=3,c.getSavesMeta();case 3:e=t.sent,g(e),N(!1);case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(C.a)(_.a.mark(function t(){var e;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getSavesMeta();case 2:e=t.sent,k(e);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),m=Object(o.useState)([]),h=Object(ct.a)(m,2),v=h[0],g=h[1],E=Object(o.useState)([]),y=Object(ct.a)(E,2),w=y[0],k=y[1],S=Object(o.useState)(!1),P=Object(ct.a)(S,2),x=P[0],N=P[1];return Object(o.useEffect)(function(){e&&(f(),d())},[e]),i.a.createElement(yt.a,{open:e,onClose:n,maxWidth:"md",fullWidth:!0},i.a.createElement(wt.a,null,i.a.createElement("p",null,"\u0421\u0438\u043c\u0443\u043b\u044f\u0442\u043e\u0440 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u043e\u0432")),i.a.createElement(kt.a,null,i.a.createElement(p.a,{className:"welcome-popout__body",variant:"outlined"},i.a.createElement(St.a,{dense:!0},0!==v.length?i.a.createElement(Ct.a,null,"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0432 \u043e\u0431\u043b\u0430\u043a\u0435"):null,x?i.a.createElement("div",{className:"welcome-popout__body__cloud-skeleton"},i.a.createElement(xt.a,{className:"welcome-popout__body__cloud-skeleton__rectangle",animation:"wave",variant:"rectangular",height:28}),i.a.createElement(xt.a,{className:"welcome-popout__body__cloud-skeleton__rectangle",animation:"wave",variant:"rectangular",height:28}),i.a.createElement(xt.a,{className:"welcome-popout__body__cloud-skeleton__rectangle",animation:"wave",variant:"rectangular",height:28})):0!==v.length?v.map(function(t){return i.a.createElement(_t.a,{key:t.id,secondaryAction:i.a.createElement(b.a,{variant:"contained",size:"small",onClick:function(){return u(t)}},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c")},i.a.createElement(Pt.a,null,t.name))}):null,0!==w.length?i.a.createElement(Ct.a,null,"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0432 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435"):null,0!==w.length?w.map(function(t){return i.a.createElement(_t.a,{key:t.id,secondaryAction:i.a.createElement(b.a,{variant:"contained",size:"small",onClick:function(){return l(t)}},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c")},i.a.createElement(Pt.a,null,t.name))}):null,i.a.createElement(Ct.a,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u0435\u043b\u044c"),Object.entries(R).map(function(t){return i.a.createElement(_t.a,{key:t[1].name,secondaryAction:i.a.createElement("div",null,i.a.createElement(b.a,{className:"welcome-popout__create-empty-button",variant:"text",size:"small",onClick:function(){return e=t[0],s(e,{nodes:[],edges:[]}),void n();var e}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),i.a.createElement(b.a,{variant:"contained",size:"small",onClick:function(){return e=t[0],s(e,null),void n();var e}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))},i.a.createElement(Pt.a,{primary:t[1].name,secondary:t[1].description}))}))),i.a.createElement("div",{className:"welcome-popout__footer"},i.a.createElement(At.a,{href:"https://github.com/spbu-se/WebAutomataConstructor"},i.a.createElement(Ot.a,{className:"welcome-popout__github-icon"})))))},It=n(280),Tt=n(269),Dt=n(279),jt=n(261),Lt=(n(207),function(t){var e=t.open,n=t.onClose,r=t.isLogin,s=t.onAuthFailed,a=t.graph,c=t.computerType,u=function(){var t=Object(C.a)(_.a.mark(function t(){var e;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:A(!0),e=[],t.t0=g,t.next="cloud"===t.t0?5:"browser"===t.t0?9:13;break;case 5:return t.next=7,m.getSavesMeta();case 7:return e=t.sent,t.abrupt("break",15);case 9:return t.next=11,d.getSavesMeta();case 11:return e=t.sent,t.abrupt("break",15);case 13:return P([]),t.abrupt("break",15);case 15:P(e),A(!1);case 17:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),l=Object(o.useState)(new ut),d=Object(ct.a)(l,1)[0],f=Object(o.useState)(new bt(s)),m=Object(ct.a)(f,1)[0],h=Object(o.useState)(r?"cloud":"browser"),v=Object(ct.a)(h,2),g=v[0],y=v[1],w=Object(o.useState)([]),k=Object(ct.a)(w,2),S=k[0],P=k[1],x=Object(o.useState)(!1),N=Object(ct.a)(x,2),O=N[0],A=N[1],M=Object(o.useState)(""),I=Object(ct.a)(M,2),T=I[0],D=I[1];return Object(o.useEffect)(function(){e&&(y(r?"cloud":"browser"),u())},[e]),Object(o.useEffect)(function(){u()},[g]),Object(o.useEffect)(function(){D("")},[g,e]),i.a.createElement(yt.a,{open:e,onClose:n},i.a.createElement(wt.a,null,i.a.createElement("p",null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435")),i.a.createElement(kt.a,null,i.a.createElement("div",{className:"saving-popout__body"},i.a.createElement("div",{className:"saving-popout__body__sidebar"},i.a.createElement(Tt.a,{orientation:"vertical",exclusive:!0,value:g,onChange:function(t,e){y(e=e||g)}},i.a.createElement(Dt.a,{value:"cloud",disabled:!r},"\u041e\u0431\u043b\u0430\u043a\u043e"),i.a.createElement(Dt.a,{value:"browser"},"\u0411\u0440\u0430\u0443\u0437\u0435\u0440"))),i.a.createElement("div",{className:"saving-popout__body__main"},i.a.createElement(p.a,{className:"saving-popout__body__main__paper",variant:"outlined"},O?i.a.createElement("div",{className:"saving-popout__body__main__skeleton"},i.a.createElement(xt.a,{className:"saving-popout__body__main__skeleton__bar",animation:"wave",variant:"rectangular",height:"36"}),i.a.createElement(xt.a,{className:"saving-popout__body__main__skeleton__bar",animation:"wave",variant:"rectangular",height:"36"}),i.a.createElement(xt.a,{className:"saving-popout__body__main__skeleton__bar",animation:"wave",variant:"rectangular",height:"36"})):i.a.createElement(St.a,{dense:!0},S.map(function(t){return i.a.createElement(_t.a,{key:t.id,disablePadding:!0},i.a.createElement(jt.a,{onClick:function(e){return function(t,e){D(e.name)}(0,t)}},i.a.createElement(Pt.a,{primary:t.name})))}))))),i.a.createElement(E.a,{className:"saving-popout__save-name-input",variant:"standard",size:"small",label:"\u0418\u043c\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",value:T,onChange:function(t){var e=t.target.value;D(e)}}),i.a.createElement(It.a,null,i.a.createElement(b.a,{color:"primary",onClick:function(t){switch(g){case"cloud":m.save(T,a,c);break;case"browser":d.save(T,a,c)}u(),n()}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),i.a.createElement(b.a,{color:"primary",onClick:n},"\u041e\u0442\u043c\u0435\u043d\u0430"))))}),Kt=n(58),Rt=n(19),zt=n(62),Ht=(n(208),n(149)),Ft=(n(209),function(t){var e=t.style,n=t.className,o=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*o));return e}(30);document.cookie="state=".concat(o,"; path=/; max-age=3600; secure");var r="".concat("https://accounts.google.com/o/oauth2/v2/auth","?access_type=").concat("offline","&client_id=").concat("196702226545-b0hbpiq78pg29jle3rigem4jcucu8g36.apps.googleusercontent.com","&redirect_uri=").concat("https://sscss.ru:2101/auth/oauth/google/callback","&response_type=").concat("code","&scope=").concat("https://www.googleapis.com/auth/userinfo.email","&state=").concat(o);return i.a.createElement("div",{className:"google_oauth_button ".concat(n),style:Object(Ht.a)({},e)},i.a.createElement("form",{className:"google_oauth_button__form",method:"POST",action:r},i.a.createElement("button",{className:"google_oauth_button__button",type:"submit",value:"Authorize via Google OAuth"},i.a.createElement("img",{className:"google_oauth_button__logo",src:"media/images/google_logo_18.png",alt:"Google icon","aria-hidden":!0}),i.a.createElement("p",{className:"google_oauth_button__text"},"Sign in with Google"))))}),Bt=function(t){return Object(zt.a)(t),i.a.createElement("div",{className:"login-page"},i.a.createElement("div",{className:"login-page__form"},i.a.createElement(Ft,null)))};n(210);var Ut=function(t){Object(zt.a)(t);var e=Object(o.useState)("ping..."),n=Object(ct.a)(e,2),r=n[0],s=n[1],a=function(){var t=Object(C.a)(_.a.mark(function t(){var e,n;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,t.prev=1,t.next=4,new Promise(function(t,e){var n=lt;n.port=pt,n.pathname="/ping";var o=ht(mt());fetch(n.href,o).then(function(t){if(!t.ok)throw new Error(t.status+t.statusText);return t.text()}).then(function(e){return t({pong:e})}).catch(function(t){return e(t)})});case 4:n=t.sent,e=n.pong,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}},t,null,[[1,8]])}));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)(function(){a().then(function(t){return s(null!==t&&void 0!==t?t:"Failed to ping")})}),i.a.createElement("div",{className:"ping-page"},r)},Vt=(n(211),function(t){return Object(zt.a)(t),i.a.createElement("div",{className:"failed-login-page"},i.a.createElement("h1",null,"Login failed"),i.a.createElement(Kt.b,{to:"/login"},"Login page"))}),Gt=n(281),Jt=n(282),Wt=(n(217),function(t){var e=t.onMenuButtonClicked,n=t.onSaveButtonClicked,o=t.onLogoutButtonClicked,r=t.isLogin,s=Object(Rt.f)();return i.a.createElement(Gt.a,{position:"sticky"},i.a.createElement(Jt.a,{variant:"dense"},i.a.createElement("div",{className:"app__header__left"},i.a.createElement(b.a,{className:"app__header__button",color:"inherit",onClick:e},"\u041c\u0435\u043d\u044e"),i.a.createElement(b.a,{className:"app__header__button",color:"inherit",onClick:n},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),i.a.createElement("div",{className:"app__header__right"},i.a.createElement(b.a,{className:"app__header__button",color:"inherit",onClick:r?function(){document.cookie="token=; path=/; secure; max-age=-99999999",o()}:function(){s.push("/login")}},r?"\u0412\u044b\u0439\u0442\u0438":"\u0412\u043e\u0439\u0442\u0438"))))});function Zt(t){return new Promise(function(e,n){var o=lt;o.port=dt,o.pathname="/auth/obtain",o.pathname+="/"+t.state,fetch(o.href).then(function(t){if(!t.ok)throw new Error(t.status+t.statusText);return t.json()}).then(function(t){return e(t)}).catch(function(t){return n(t)})})}n(218);var Xt=function(t){var e=t.onAuthSuccess,n=function(){var t=Object(C.a)(_.a.mark(function t(){var n,o;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=z("state")||"",o=null,t.prev=2,t.next=5,Zt({state:n});case 5:o=t.sent,e(),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return");case 13:document.cookie="token=".concat(o.value,"; path=/; secure; max-age=86400"),r.push("/");case 15:case"end":return t.stop()}},t,null,[[2,9]])}));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)(function(){n()},[]);var r=Object(Rt.f)();return i.a.createElement("div",null)},Yt=n(154),qt=n(155),Qt=n(152),$t=function(t){var e=Object(o.useState)(Object(o.useRef)(null)),n=Object(ct.a)(e,2),r=n[0],s=(n[1],Object(o.useState)({edges:{smooth:{enabled:!0,type:"discrete",roundness:.5},color:"#000000",width:.5,arrows:{to:{enabled:!0,scaleFactor:.5}},length:200},manipulation:{enabled:!1,addEdge:function(e,n){console.log("add edge",e),n(e),E(!1),t.network.current.disableEditMode()}},layout:{improvedLayout:!1},nodes:{shapeProperties:{interpolation:!1},shape:"circle",font:"18px Roboto black",labelHighlightBold:!1,size:40,borderWidth:2,color:{background:"#ffffff",border:"#000000",highlight:{border:"#000000",background:"#ffffff"}}},physics:{enabled:!1}})),a=Object(ct.a)(s,2),c=a[0],u=(a[1],i.a.useState(null)),l=Object(ct.a)(u,2),d=l[0],p=l[1],f=function(t){t.preventDefault(),p(null===d?{mouseX:t.clientX-2,mouseY:t.clientY-4}:null)},m=function(){p(null)},h=Object(o.useState)(!1),v=Object(ct.a)(h,2),g=v[0],E=v[1],b=Object(o.useCallback)(function(e){17===e.keyCode&&(g||(console.log("handleUserKeyPress"),t.network.current.addEdgeMode(),E(!0),console.log("--\x3e"+g)))},[g]),y=Object(o.useCallback)(function(e){17===e.keyCode&&g&&(console.log("handleUserKeyUnPress"),t.network.current.disableEditMode(),E(!1),console.log("--\x3e"+g))},[g]),w=Object(o.useState)(Object(o.useRef)(null)),k=Object(ct.a)(w,2);k[0],k[1],new qt.a([{id:1,content:"item 1",start:"2014-04-20"},{id:2,content:"item 2",start:"2014-04-14"},{id:3,content:"item 3",start:"2014-04-18"},{id:4,content:"item 4",start:"2014-04-16",end:"2014-04-19"},{id:5,content:"item 5",start:"2014-04-25"},{id:6,content:"item 6",start:"2014-04-27",type:"point"}]);Object(o.useEffect)(function(){return window.addEventListener("keydown",b),window.addEventListener("keyup",y),console.log("--"+g),function(){window.removeEventListener("keydown",b),window.removeEventListener("keyup",y)}},[b]);i.a.createRef();Object(o.useLayoutEffect)(function(){r.current&&(t.network.current=new Yt.a(r.current,t.data,c),console.log("HERE<-domNode.current")),console.log("HERE<-"),window.addEventListener("contextmenu",function(t){return t.preventDefault()}),t.network.current&&(t.network.current.on("doubleClick",function(e){E(!1),t.onDoubleClick(e)}),t.network.current.on("click",t.onClick1),t.network.current.on("click",t.onClick2),t.network.current.on("click",t.onClick3),t.network.current.on("click",t.onClick4),t.network.current.on("click",t.onClick4),t.network.current.on("dragging",function(){t.network.current.unselectAll()}),t.network.current.on("controlNodeDragging",function(){t.network.current.unselectAll()}))},[r,t.data,t.network,c]);var S=function(){return i.a.createElement("div",{id:"network",style:{height:"100%",width:"100%"},ref:r})};return void 0===t.contextMenu?S():i.a.createElement("div",{onContextMenu:f,style:{height:"100%",width:"100%"}},S(),i.a.createElement(Qt.a,{open:null!==d,onClose:m,anchorReference:"anchorPosition",anchorPosition:null!==d?{top:d.mouseY,left:d.mouseX}:void 0},t.contextMenu(m,f)))},te=n(283),ee=n(264),ne={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},oe=function(t){var e=o.useState(!1),n=Object(ct.a)(e,2),i=n[0],r=n[1];return Object(o.useEffect)(function(){t.isNonDetermenistic&&(r(t.isNonDetermenistic),t.setIsNonDetermenistic(!1))}),o.createElement("div",null,o.createElement(ee.a,{open:i,onClose:function(){return r(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},o.createElement(te.a,{sx:ne},o.createElement(f.a,{id:"modal-modal-title",variant:"h6",component:"h2"},"\u041e\u0448\u0438\u0431\u043a\u0430"),o.createElement(f.a,{id:"modal-modal-description",sx:{mt:2}},"\u041d\u0435\u0434\u0435\u0442\u0435\u0440\u043c\u0435\u043d\u0438\u0437\u043c"))))},ie=function(t){var e=o.useState(!1),n=Object(ct.a)(e,2),i=n[0],r=n[1];return Object(o.useEffect)(function(){t.isNonMinimizable&&(r(t.isNonMinimizable),t.setIsNonMinimizable(!1))}),o.createElement("div",null,o.createElement(ee.a,{open:i,onClose:function(){return r(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},o.createElement(te.a,{sx:ne},o.createElement(f.a,{id:"modal-modal-title",variant:"h6",component:"h2"},"\u041e\u0448\u0438\u0431\u043a\u0430"),o.createElement(f.a,{id:"modal-modal-description",sx:{mt:2}},"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0438\u0437\u0440\u043e\u0432\u0430\u0442\u044c"))))},re=function(t){var e=Object(o.useState)(Object(o.useRef)(null)),n=Object(ct.a)(e,2),r=n[0],s=(n[1],Object(o.useState)({edges:{smooth:{enabled:!0,type:"discrete",roundness:.5},color:"#000000",width:.5,arrows:{to:{enabled:!0,scaleFactor:.5}},length:200},manipulation:{enabled:!1,addEdge:function(e,n){console.log("add edge",e),n(e),E(!1),t.network.current.disableEditMode()}},interaction:{keyboard:!1,dragNodes:!1},layout:{hierarchical:{treeSpacing:200,direction:"LR",parentCentralization:!1,sortMethod:"directed",shakeTowards:"roots"}},nodes:{shapeProperties:{interpolation:!1},shape:"circle",font:"18px Roboto black",labelHighlightBold:!1,size:40,borderWidth:2,color:{background:"#ffffff",border:"#000000",highlight:{border:"#000000",background:"#ffffff"}}},physics:{enabled:!1}})),a=Object(ct.a)(s,2),c=a[0],u=(a[1],i.a.useState(null)),l=Object(ct.a)(u,2),d=l[0],p=l[1],f=function(t){t.preventDefault(),p(null===d?{mouseX:t.clientX-2,mouseY:t.clientY-4}:null)},m=function(){p(null)},h=Object(o.useState)(!1),v=Object(ct.a)(h,2),g=v[0],E=v[1],b=Object(o.useCallback)(function(e){17===e.keyCode&&(g||(console.log("handleUserKeyPress"),t.network.current.addEdgeMode(),E(!0),console.log("--\x3e"+g)))},[g]),y=Object(o.useCallback)(function(e){17===e.keyCode&&g&&(console.log("handleUserKeyUnPress"),t.network.current.disableEditMode(),E(!1),console.log("--\x3e"+g))},[g]);Object(o.useEffect)(function(){return window.addEventListener("keydown",b),window.addEventListener("keyup",y),console.log("--"+g),function(){window.removeEventListener("keydown",b),window.removeEventListener("keyup",y)}},[b]),Object(o.useLayoutEffect)(function(){r.current&&(t.network.current=new O.b(r.current,t.data,c),console.log("HERE<-domNode.current")),console.log("HERE<-"),window.addEventListener("contextmenu",function(t){return t.preventDefault()}),t.network.current&&(t.network.current.on("doubleClick",function(e){E(!1),t.onDoubleClick(e)}),t.network.current.on("click",t.onClick1),t.network.current.on("click",t.onClick2),t.network.current.on("click",t.onClick3),t.network.current.on("click",t.onClick4),t.network.current.on("click",t.onClick4),t.network.current.on("dragging",function(){t.network.current.unselectAll()}),t.network.current.on("controlNodeDragging",function(){t.network.current.unselectAll()}))},[r,t.data,t.network,c]);var w=function(){return i.a.createElement("div",{id:"vnc",style:{height:"100%",width:"100%"},ref:r})};return void 0===t.contextMenu?w():i.a.createElement("div",{onContextMenu:f,style:{height:"100%",width:"100%"}},w(),i.a.createElement(Qt.a,{open:null!==d,onClose:m,anchorReference:"anchorPosition",anchorPosition:null!==d?{top:d.mouseY,left:d.mouseX}:void 0},t.contextMenu(m,f)))},se=i.a.createContext(null),ae={init:function(){},nfaToDfa:function(){},minimizeDfa:function(){},mooreToMealy:function(){},mealyToMoore:function(){}},ce={changerByStack:function(){},run:function(){},step:function(){},reset:function(){}},ue=function(t){var e,n=i.a.createRef();return"tm"===t.computerType&&t.wasComputerResetted?i.a.createElement("div",{className:"app__mem_ribbon"},null===(e=t.mem)||void 0===e?void 0:e.map(function(e,o){var r;return i.a.createElement("div",{className:"app__mem_cell",style:{border:"".concat(o===t.ptr?"#0041d0":"#000000"," 2px solid")}},Math.abs(Math.abs(o)-Math.abs(t.ptr))<=5?i.a.createElement("div",{ref:n}):i.a.createElement("div",null),e,null===n||void 0===n?void 0:null===(r=n.current)||void 0===r?void 0:r.scrollIntoView({behavior:"smooth"}))})):i.a.createElement("div",null)},le=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var o;return Object(a.a)(this,n),(o=e.call(this,t)).memRef=i.a.createRef(),o.network=i.a.createRef(),o.networkTST=i.a.createRef(),o.setIsNonDetermenistic=function(t){return o.setState({errIsNonDetermenistic:t})},o.setIsNonMinimizable=function(t){return o.setState({errIsNonMinimizable:t})},o.lastNodeId=0,o.subscribeToShortcuts=function(){document.addEventListener("keydown",function(t){"s"===t.key&&t.ctrlKey&&(t.preventDefault(),o.openSavePopout())})},o.openSavePopout=function(){o.setState({savePopoutOpen:!0})},o.closeSavePopout=function(){o.setState({savePopoutOpen:!1})},o.openWelcomePopout=function(){o.setState({welcomePopoutOpen:!0})},o.closeWelcomePopout=function(){o.setState({welcomePopoutOpen:!1})},o.login=function(){o.setState({isLogin:!0})},o.logout=function(){o.setState({isLogin:!1})},o.changePopout=function(t){o.setState({popout:t})},o.updateGraph=function(){j(o.state.elements,o.state.computerType)},o.changeNodeLabel=function(t,e){o.state.elements.nodes.forEach(function(n){if(n.id===t){var i=e.split("").filter(function(t){return" "!==t&&"\n"!==t}).join("").split("|"),r=void 0!==i[1]?i[1]:"";o.state.elements.nodes.update({id:n.id,label:e,output:r})}}),o.updateGraph()},o.changeStateIsAdmit=function(t,e){o.state.elements.nodes.forEach(function(n){n.id===t&&o.state.elements.nodes.update({id:n.id,isAdmit:e})}),o.updateGraph()},o.changeStateIsInitial=function(t,e){o.state.elements.nodes.forEach(function(n){n.id===t&&o.state.elements.nodes.update({id:n.id,isInitial:e})}),o.updateGraph()},o.changeStateIsCurrent=function(t,e){o.state.elements.nodes.forEach(function(t){t.isCurrent&&o.state.elements.nodes.update({id:t.id,isCurrent:!1})}),o.state.elements.nodes.forEach(function(n){t.includes(n.id)&&o.state.elements.nodes.update({id:n.id,isCurrent:e})}),o.updateGraph()},o.createNode=function(t){o.lastNodeId++;var e={id:o.lastNodeId,label:"S"+o.lastNodeId,x:t.pointer.canvas.x,y:t.pointer.canvas.y,isAdmit:!1,isInitial:!1,isCurrent:!1};o.state.elements.nodes.add(e)},o.lastHistNodeId=0,o.createHistNode=function(t,e,n,i,r){o.lastHistNodeId++;var s={id:o.lastHistNodeId,idd:t,label:e,isAdmit:n,isInitial:i,isCurrent:r};o.state.treeElems.nodes.add(s)},o.createHistEdge=function(t,e,n){var i=new Set([[{title:n}]]);o.state.treeElems.edges.add({from:t,to:e,transitions:i,label:T(i,o.state.computerType)})},o.getLastHistNodeId=function(){return o.lastHistNodeId},o.resetHistTree=function(){for(var t=0;t<=o.lastHistNodeId;t++)o.state.treeElems.nodes.remove(t);o.state.treeElems.edges.forEach(function(t){return o.state.treeElems.edges.remove(t.id)}),o.lastHistNodeId=0},o.selectNode=function(t){var e=t.nodes,n=o.state.elements.nodes.get(e);o.setState({selectedNode:n[0]})},o.deselectNode=function(t){0===t.nodes.length&&o.setState({selectedNode:null})},o.deleteNode=function(t){o.state.elements.nodes.remove(t);var e=[];o.state.elements.edges.forEach(function(n){n.from!==t&&n.to!==t||e.push(n.id)}),o.state.elements.edges.remove(e)},o.selectEdge=function(t){var e=t.edges,n=o.state.elements.edges.get(e);o.setState({selectedEdge:n[0]}),console.log("click1  = selectEdge")},o.deselectEdge=function(t){0===t.edges.length&&o.setState({selectedEdge:null})},o.changeEdgeTransition=function(t,e){o.state.elements.edges.update({id:t,label:T(e,o.state.computerType),transitions:e})},o.deleteEdge=function(t){o.state.elements.edges.remove(t)},o.updMem=function(t,e){o.setState({mem:t,ptr:e})},o.NFAContextMenu=function(t,e){return i.a.createElement("div",{onContextMenu:t},i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.step},"\u0428\u0430\u0433")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.run},"\u0417\u0430\u043f\u0443\u0441\u043a")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.reset},"\u0421\u0431\u0440\u043e\u0441")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ae.nfaToDfa},"\u041d\u041a\u0410->\u0414\u041a\u0410")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:o.treeVisible},o.treeContextInfo())))},o.treeVisible=function(){return o.setState({showTree:!o.state.showTree}),!o.state.showTree},o.treeContextInfo=function(){return(o.state.showTree?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c")+" \u0434\u0435\u0440\u0435\u0432\u043e \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439"},o.DFAContextMenu=function(t,e){return i.a.createElement("div",{onContextMenu:t},i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.step},"\u0428\u0430\u0433")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.run},"\u0417\u0430\u043f\u0443\u0441\u043a")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.reset},"\u0421\u0431\u0440\u043e\u0441")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ae.minimizeDfa},"\u041c\u0438\u043d\u0438\u043c\u0438\u0437\u0440\u043e\u0432\u0430\u0442\u044c")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:o.treeVisible},o.treeContextInfo())))},o.MealyContextMenu=function(t,e){return i.a.createElement("div",{onContextMenu:t},i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.step},"\u0428\u0430\u0433")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.run},"\u0417\u0430\u043f\u0443\u0441\u043a")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.reset},"\u0421\u0431\u0440\u043e\u0441")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ae.mealyToMoore},"\u041c\u0443\u0440")))},o.MooreContextMenu=function(t,e){return i.a.createElement("div",{onContextMenu:t},i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.step},"\u0428\u0430\u0433")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.run},"\u0417\u0430\u043f\u0443\u0441\u043a")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.reset},"\u0421\u0431\u0440\u043e\u0441")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ae.mooreToMealy},"\u041c\u0438\u043b\u0438")))},o.PDAContextMenu=function(t,e){return i.a.createElement("div",{onContextMenu:t},i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.step},"\u0428\u0430\u0433")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.run},"\u0417\u0430\u043f\u0443\u0441\u043a")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.reset},"\u0421\u0431\u0440\u043e\u0441")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.changerByStack},o.state.byEmptyStack?"\u041f\u043e \u0441\u0442\u0435\u043a\u0443":"\u041f\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e")))},o.AnotherContextMenu=function(t,e){return i.a.createElement("div",{onContextMenu:t},i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.step},"\u0428\u0430\u0433")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.run},"\u0417\u0430\u043f\u0443\u0441\u043a")),i.a.createElement("div",{onClick:e},i.a.createElement("button",{className:"button-context-menu",onClick:ce.reset},"\u0421\u0431\u0440\u043e\u0441")))},o.ContextMenu=function(t){switch(t){case"nfa":case"nfa-eps":return o.NFAContextMenu;case"dfa":return o.DFAContextMenu;case"mealy":case"dmealy":return o.MealyContextMenu;case"moore":case"dmoore":return o.MooreContextMenu;case"pda":case"dpda":return o.PDAContextMenu;default:return o.AnotherContextMenu}},o.state={computerType:null,selectedNode:null,selectedEdge:null,inEdgeMode:!1,elements:{nodes:new O.a,edges:new O.a},treeElems:{nodes:new O.a,edges:new O.a},options:{edges:{smooth:{enabled:!0,type:"discrete",roundness:.5},length:200},nodes:{shape:"box",font:"18px Roboto black",labelHighlightBold:!1,widthConstraint:40,color:"red",heightConstraint:40},physics:{enabled:!1}},initiallyStabilized:!1,popout:null,savePopoutOpen:!1,welcomePopoutOpen:!1,isLogin:!0,mem:void 0,ptr:void 0,wasComputerResetted:!1,byEmptyStack:!1,errIsNonDetermenistic:!1,errIsNonMinimizable:!1,showTree:!1},o}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.updateGraph(),this.openWelcomePopout()}},{key:"render",value:function(){var t=this;return i.a.createElement(Kt.a,null,i.a.createElement(Rt.c,null,i.a.createElement(Rt.a,{path:"/login"},i.a.createElement(Bt,null)),i.a.createElement(Rt.a,{path:"/ping"},i.a.createElement(Ut,null)),i.a.createElement(Rt.a,{path:"/failed-login"},i.a.createElement(Vt,null)),i.a.createElement(Rt.a,{path:"/success-login"},i.a.createElement(Xt,{onAuthSuccess:this.login})),i.a.createElement(Rt.a,{path:"/"},i.a.createElement(se.Provider,{value:this.state.computerType},i.a.createElement("div",{className:"app"},i.a.createElement(Mt,{open:this.state.welcomePopoutOpen,onClose:this.closeWelcomePopout,onAuthFailed:this.logout,changeComputerType:function(e,n){var o=n||R[e].defaultGraph;console.log(o),console.log(o.nodes),L(o).nodes.forEach(function(t){return console.log(t)}),t.lastNodeId=o.nodes.length,t.setState({computerType:e,elements:L(o)},function(){return t.updateGraph()})}}),this.state.popout,i.a.createElement(Lt,{open:this.state.savePopoutOpen,onClose:this.closeSavePopout,isLogin:this.state.isLogin,onAuthFailed:this.logout,graph:K(this.state.elements),computerType:this.state.computerType}),i.a.createElement("div",{className:"hint-container"},i.a.createElement(p.a,{className:"hint",variant:"outlined"},"Ctrl+S \u2014 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442"),i.a.createElement(p.a,{className:"hint",variant:"outlined"},"\u0423\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0439\u0442\u0435 Ctrl \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u0435\u0431\u0440\u043e"),i.a.createElement(p.a,{className:"hint",variant:"outlined"},"\u0414\u0432\u043e\u0439\u043d\u043e\u0435 \u043d\u0430\u0436\u0430\u0442\u0438\u0435 \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0432\u0435\u0440\u0448\u0438\u043d\u0443"),i.a.createElement(p.a,{className:"hint",variant:"outlined"},"\u041f\u041a\u041c \u0434\u043b\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u044f \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u043e\u0433\u043e \u043c\u0435\u043d\u044e")),i.a.createElement(oe,{isNonDetermenistic:this.state.errIsNonDetermenistic,setIsNonDetermenistic:this.setIsNonDetermenistic}),i.a.createElement(ie,{isNonMinimizable:this.state.errIsNonMinimizable,setIsNonMinimizable:this.setIsNonMinimizable}),i.a.createElement(ue,{computerType:this.state.computerType,wasComputerResetted:this.state.wasComputerResetted,mem:this.state.mem,ptr:this.state.ptr}),i.a.createElement(Wt,{onMenuButtonClicked:this.openWelcomePopout,onSaveButtonClicked:this.openSavePopout,onLogoutButtonClicked:this.logout,isLogin:this.state.isLogin}),i.a.createElement("div",{className:"field__container"},i.a.createElement($t,{nodes:this.state.elements.nodes,edges:this.state.elements.edges,data:this.state.elements,onDoubleClick:this.createNode,onClick1:this.selectEdge,onClick2:this.selectNode,onClick3:this.deselectNode,onClick4:this.deselectEdge,network:this.network,contextMenu:this.ContextMenu(this.state.computerType)})),this.state.showTree?i.a.createElement("div",{className:"eval-tree"},i.a.createElement(re,{nodes:this.state.treeElems.nodes,edges:this.state.treeElems.edges,data:this.state.treeElems,onDoubleClick:this.createNode,onClick1:this.selectEdge,onClick2:this.selectNode,onClick3:this.deselectNode,onClick4:this.deselectEdge,network:this.networkTST,contextMenu:this.ContextMenu(this.state.computerType)})):i.a.createElement("div",null),i.a.createElement("div",{className:"app__right-menu"},i.a.createElement(k,{node:this.state.selectedNode,changeNodeLabel:this.changeNodeLabel,changeStateIsAdmit:this.changeStateIsAdmit,changeStateIsInitial:this.changeStateIsInitial,deleteNode:this.deleteNode,reinitComputer:ae.init}),i.a.createElement(U,{edge:this.state.selectedEdge,changeEdgeTransitions:this.changeEdgeTransition,deleteEdge:this.deleteEdge,computerType:this.state.computerType,reinitComputer:ae.init}),i.a.createElement(at,{updMem:this.updMem,elements:this.state.elements,treeElems:this.state.treeElems,createHistNode:this.createHistNode,createHistEdge:this.createHistEdge,getLastHistNodeId:this.getLastHistNodeId,resetHistTree:this.resetHistTree,changeStateIsCurrent:this.changeStateIsCurrent,network:this.network,setInit:function(t){return ae.init=t},setNfaToDfa:function(t){return ae.nfaToDfa=t},setMinimizeDfa:function(t){return ae.minimizeDfa=t},setMooreToMealy:function(t){return ae.mooreToMealy=t},setMealyToMoore:function(t){return ae.mealyToMoore=t},updateElements:function(e){return t.setState({elements:e},function(){return t.updateGraph()})},setComputerType:function(e){return t.setState({computerType:e})},setResettedStatus:function(e){return t.setState({wasComputerResetted:e})},setByEmptyStack:function(e){return t.setState({byEmptyStack:e})},setChangerByStack:function(t){return ce.changerByStack=t},setRun:function(t){return ce.run=t},setStep:function(t){return ce.step=t},setReset:function(t){return ce.reset=t},setIsNonDetermenistic:this.setIsNonDetermenistic,setIsNonMinimizable:this.setIsNonMinimizable})))))))}}]),n}(i.a.Component);s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(le,null)),document.getElementById("root"))},31:function(t,e,n){"use strict";e.__esModule=!0,function(t){t[t.L=0]="L",t[t.R=1]="R"}(e.Move||(e.Move={}))},34:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();e.__esModule=!0;var i=function(t){function e(){var n=t.call(this)||this;return n.name="NonDeterministic",Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error);e.NonDeterministic=i;var r=function(t){function e(){var n=t.call(this)||this;return n.name="NonMinimizable",Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error);e.NonMinimizable=r},69:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};e.__esModule=!0;var r=n(15),s=n(202),a=n(117),c=n(34),u=function(t){function e(e,n,o,i){var a=t.call(this,e,n)||this;return a.stack=new s.Stack,a.setInput=function(t){a.input=[],t.forEach(function(t){a.input.push({idLogic:a.alphabet.get(t),value:t})}),a.restart()},a.haveEpsilon=function(){return void 0!==a.epsId},a.byEmptyStackAdmt=function(t){a.admitByEmptyStack=t},a.treeHist=[],a.pdaStep=function(){var t,e=a._step(a.counterSteps,a.alphabet.get(null===(t=a.input[a.counterSteps])||void 0===t?void 0:t.value),a.historiStep,[]);return a.counterSteps=e.counter,a.historiStep=e.history,a.treeHist=e.tree?e.tree:[],console.log("STEP stck: "),e.history.forEach(function(t){return t.nodes.forEach(function(t){return console.log(t.stack)})}),console.log("STEP admit: "),console.log(e.isAdmit),e},a.pdaRun=function(){a.historiRun=[],a.counterStepsForResult=0;for(var t=[],e=0;e<a.input.length-1;e++){var n=a._step(a.counterStepsForResult,a.alphabet.get(a.input[a.counterStepsForResult].value),a.historiRun,t);a.counterStepsForResult=n.counter,a.historiRun=n.history}return a._step(a.counterStepsForResult,a.alphabet.get(a.input[a.counterStepsForResult].value),a.historiRun,t)},a.step=a.pdaStep,a.run=a.pdaRun,a._step=function(t,e,n,o){var i=[],r=[],s=[],c=[],u=function(){a.curPosition=[],c.forEach(function(t){return a.curPosition.push(t)}),c=[]},l=function(){a.curPosition.forEach(function(t){var e,n=a.epsilonStep(t.stmt.idLogic,null===(e=t.stack)||void 0===e?void 0:e.peek(),t.stack,o);null===n||void 0===n||n.forEach(function(t){return c.push(t)})})},d=function(){var t=new Map,e=[];a.curPosition.forEach(function(n){var o={stmt:n.stmt,stack:n.stack};void 0===t.get(JSON.stringify(o))&&(e.push(n),t.set(JSON.stringify(o),n))}),a.curPosition=[],e.forEach(function(t){return a.curPosition.push(t)})};return void 0!==a.epsId&&(l(),u(),d(),a.toNodes(a.curPosition).forEach(function(t){return i.push(t)})),t<a.input.length?(a.curPosition.forEach(function(t){a.letterStep(e,t.stmt.idLogic,t.stack.peek(),t.stack,o).forEach(function(t){return c.push(t)})}),u(),d(),a.toNodes(a.curPosition).forEach(function(t){return s.push(t)}),void 0!==a.epsId&&(l(),u(),d(),a.toNodes(a.curPosition).forEach(function(t){return r.push(t)})),d(),n.push({nodes:a.toNodes(a.curPosition),by:a.input[t].value}),t++,a.treeHist.push(o),{nodes:a.toNodes(a.curPosition),counter:t,isAdmit:a.haveAdmitting(a.curPosition),history:n,tree:a.treeHist,byEpsPred:i,byEpsAfter:r,byLetter:s}):(d(),a.treeHist.push(o),{nodes:a.toNodes(a.curPosition),counter:t,isAdmit:a.haveAdmitting(a.curPosition),history:n,tree:a.treeHist,byEpsPred:i,byEpsAfter:r,byLetter:s})},a.restart=function(){a.counterSteps=0,a.historiStep=[],a.curPosition=[],a.treeHist=[],a.startStatements.forEach(function(t){var e=new s.Stack;e.push(r.BOTTOM),a.curPosition.push({stmt:a.statements.get(t.id),stack:e})})},a.nfaToDfa=function(){var t=function(t,e){var n=[];return t.map(function(t){return function(t,e){return a.cellMatrix(t.stmt.idLogic,e).map(function(t){return{stmt:t}})}(t,e)}).forEach(function(t){return t.forEach(function(t){return n.push(t)})}),n},e=function(t){n.push(t)},n=[],o=[],i=new l,c=a.curPosition;a.restart(),e(c);for(var u=function(){var c=n.shift(),u=[];return void 0===c||0===c.length?"break":i.has(c)?"continue":(i.add(c.map(function(t){return{stmt:{id:t.stmt.id,idLogic:t.stmt.idLogic,isAdmit:t.stmt.isAdmit},stack:void 0}})),a.alphabet.forEach(function(n){if(n!==a.epsId){var o=function(e,n){var o=function(t){if(void 0===a.epsId)return t;var e=[],n=new s.Stack;n.push(r.EPS),t.forEach(function(t){var o=a.epsilonStep(t.stmt.idLogic,r.EPS,n,[]);void 0!==o&&e.push(o)});var o=[];return e.forEach(function(t){return t.forEach(function(t){return o.push(t)})}),o};return o(t(o(e),n))}(c,n),l=o.map(function(t){return{stmt:{id:t.stmt.id,idLogic:t.stmt.idLogic,isAdmit:t.stmt.isAdmit},stack:void 0}});u.push(l),o.length>0&&!i.has(o)&&!i.has(l)&&e(l)}}),void o.push(u))};n.length>0;){if("break"===u())break}var d=[];o.forEach(function(t,e){a.alphabet.forEach(function(n,o){n!==a.epsId&&0!==t[n].length&&(console.log(t[n]),console.log(e,i.getIter(t[n])),d.push({from:e,to:i.getIter(t[n]),transitions:new Set([[{title:o}]])}))})});var p=i.getStorage().map(function(t){return{id:i.getIter(t),isAdmit:a.haveAdmitting(t)}}),f=[];d.sort(function(t,e){return t.from-e.from||t.to-e.to});for(var m=0;m<d.length;m++){for(var h=[],v=0,g=m;g<d.length;g++)d[m].from===d[g].from&&d[m].to===d[g].to&&(h.push(Array.from(d[g].transitions)[0][0]),v++);f.push({from:d[m].from,to:d[m].to,transitions:new Set([h])}),m+=v-1}return{nodes:p,edges:f}},a.minimizeDfa=function(){a.restart();var t=a.curPosition[0].stmt.idLogic,e=function(t){return function(e){return function(n){return t[e][n]}}},n=[],o=function(t){return n.push(t)},i=[],r=[],s=[];a.statements.forEach(function(t){var e={number:-1,node:{idLogic:-1,id:-1,isAdmit:!1}};t.isAdmit?(e={number:1,node:t},r.push(e)):(e={number:2,node:t},s.push(e)),i.push(e)});var u=a.matrix.reduce(function(t,e){return t&&e.reduce(function(t,e){return t&&e.length>0},t)},!0);if(r.length<1||!u)throw console.log("CATHTHT"),new c.NonMinimizable;var l=[];l.push(r),l.push(s);var d=function(t){var e,n=(e=t,function(t){return e[t]}),o=[];return a.alphabet.forEach(function(t){var e=[];(function(t){var e=[];return a.matrix.forEach(function(n,o){return e.push(a.cellMatrix(o,t)[0])}),e})(t).forEach(function(t){e.push(n(t.idLogic))}),o.push(e)}),o}(i);a.alphabet.forEach(function(t){l.forEach(function(t){return o(t)});for(var i=e(d)(t),r=function(t){return function(e){return function(n){var o=e(n[0].node.idLogic).number,i=[],r=t.length+1,s=[];n.forEach(function(t,n){e(t.node.idLogic).number!==o&&(t.number=r,s.push(t.node.idLogic),i.push(t))});for(var a=0;a<n.length;a++)s.includes(n[a].node.idLogic)&&(n.splice(a,1),a--);return i.length>0?(t.push(i),{fst:n,snd:i}):{fst:[],snd:[]}}}}(l)(i);n.length>0;){var s=n.shift();if(void 0===s)break;var a=r(s);a.fst.length>0&&(o(a.fst),o(a.snd))}});var p=function(t){return t.map(function(t){return{stmt:t.node}})},f=l.map(function(t){return{id:t[0].number,isAdmit:a.haveAdmitting(p(t))}}),m=l.reduce(function(t,n){return a.alphabet.forEach(function(o,i){var r,s;t.push({from:n[0].number,to:(r=n,s=o,e(d)(s)(r[0].node.idLogic).number),transitions:new Set([[{title:i}]])})}),t},[]);return console.log(f),{graphcore:{nodes:f,edges:m},start:f[l.filter(function(e){return e.map(function(t){return t.node.idLogic}).includes(t)})[0][0].number-1]}},a.admitByEmptyStack=i,a.epsId=a.alphabet.get(r.EPS),a.stack.push(r.BOTTOM),a.curPosition=[],a.treeHist=[],n.forEach(function(t){var e=new s.Stack;e.push(r.BOTTOM),a.curPosition.push({stmt:a.statements.get(t.id),stack:e})}),a.setInput(o),a.epsId&&a.curPosition.forEach(function(t){a.cycleEps(t.stmt.idLogic,t.stack)}),console.log("-------------------------"),console.log(a.isDeterministic()),console.log("ALPHBT"),a.alphabet.forEach(function(t,e){return console.log(t,e)}),console.log("STMTS"),a.statements.forEach(function(t){return console.log(t)}),console.log("MTX"),a.matrix.forEach(function(t){console.log(),t.forEach(function(t){return console.log(t)})}),console.log("-------------------------"),a}return o(e,t),e.prototype.copyPushList=function(t){var e,n=[];return null===(e=t.stackPush)||void 0===e||e.forEach(function(t){return n.push(t)}),n},e.prototype.pushReverse=function(t,e){t.reverse().forEach(function(t){e.push(t)})},e.prototype.pushTopToNewStack0=function(t,e){t.pop();var n=this.copyPushList(e);this.pushReverse(n,t)},e.permute0=function(t){var e=a.cloneDeep(t);e=e.sort(function(t,e){return t.stackDown&&e.stackDown?t.stackDown<e.stackDown?-1:t.stackDown>e.stackDown?1:0:0});for(var n=[],o=[],i=e[0].stackDown,r=0;r<e.length;r++)e[r].stackDown===i?o.push(e[r]):(n.push(o),i=e[r].stackDown,(o=[]).push(e[r]));n.push(o);var s=[];return function t(e,o,i){if(e<n.length)for(var r=0;r<n[e].length;r++){var c=a.cloneDeep(i);c.push(n[e][r]),t(e+1,0,c)}else s.push(i)}(0,0,[]),s},e.permute=function(t){for(var e,n,o=t.length,i=[t.slice()],r=new Array(o).fill(0),s=1;s<o;)r[s]<s?(e=s%2&&r[s],n=t[s],t[s]=t[e],t[e]=n,r[s]++,s=1,i.push(t.slice())):(r[s]=0,s++);return i},e.prototype.rmRepetitions=function(t,e,n,o,i){var r;r=JSON.stringify(e),void 0===t.get(r)&&(n.push({stmt:this.statements.get(o),stack:i}),t.set(JSON.stringify({stmt:this.statements.get(o),stack:i}),{stmt:this.statements.get(o),stack:i}))},e.prototype.cycleEps=function(t,n){var o=this,i=new Map,a=[],c=[];this.cellMatrix(t,this.epsId).forEach(function(){return c.push(!1)});var u=void 0!==this.cellMatrix(t,this.epsId)[0]?e.permute0(this.cellMatrix(t,this.epsId)):[this.cellMatrix(t,this.epsId)];return u.forEach(function(e){for(var u=0;u<c.length;u++)c[u]=!1;!function t(e,n,u,l){c[n]=!0,e.forEach(function(n,d){if(n.idLogic===u)if(n.stackDown===l.peek()){var p=l.cpyTo(new s.Stack);o.matchPushEpsVal(n,p),o.rmRepetitions(i,{stmt:o.statements.get(u),stack:p},a,u,p),c[d]||t(e,d,u,p)}else n.stackDown===r.EPS&&(p=l.cpyTo(new s.Stack),o.matchDownEpsVal(n,p),o.rmRepetitions(i,{stmt:o.statements.get(u),stack:p},a,u,p),c[d]||t(e,d,u,p))})}(e,0,t,n)}),a},e.prototype.epsilonStep=function(t,e,n,o){var i=this;if(void 0!==this.epsId){for(var a=[],c=0;c<this.statements.size;c++)a.push(!1);var u=function t(e,n,o,c){i.cycleEps(e,n).forEach(function(t){c.push({idLogic:e,top:t.stack})}),c.push({idLogic:e,top:n}),a[e]=!0;for(var u=0;u<i.matrix[e][i.epsId].length;u++)if(!a[i.cellMatrix(e,i.epsId)[u].idLogic])switch(i.cellMatrix(e,i.epsId)[u].stackDown){case o:var l=n.cpyTo(new s.Stack);i.matchPushEpsVal(i.cellMatrix(e,i.epsId)[u],l),t(i.cellMatrix(e,i.epsId)[u].idLogic,l,l.peek(),c);break;case r.EPS:l=n.cpyTo(new s.Stack),i.matchDownEpsVal(i.cellMatrix(e,i.epsId)[u],l),t(i.cellMatrix(e,i.epsId)[u].idLogic,l,l.peek(),c)}return c}(t,n,e,[]),l=[];for(c=0;c<u.length;c++){var d=this.statements.get(this.nodes[u[c].idLogic].id);l.push({stmt:d,stack:u[c].top,from:this.nodes[t],cur:this.nodes[d.idLogic],by:r.EPS}),o.push({by:r.EPS,from:this.nodes[t],value:this.nodes[d.idLogic]})}return l}},e.prototype.matchPushEpsVal=function(t,e){if(t.stackPush[0]===r.EPS){if(1!==t.stackPush.length)throw Error("pushing list should be consist by [EPS] for 'pop'");e.pop()}else this.pushTopToNewStack0(e,t)},e.prototype.matchDownEpsVal=function(t,e){if(t.stackPush[0]===r.EPS&&1!==t.stackPush.length)throw Error("pushing list should be consist by [EPS] for 'pop'");if(t.stackPush[0]!==r.EPS){var n=this.copyPushList(t);this.pushReverse(n,e)}},e.prototype.letterStep=function(t,e,n,o,i){var a=this,c=[],u=function(t){var e;return a.alphabet.forEach(function(n,o){t===n&&(e=o)}),e};return this.cellMatrix(e,t).forEach(function(l){switch(l.stackDown){case n:var d=o.cpyTo(new s.Stack);a.matchPushEpsVal(l,d),c.push({stmt:a.statements.get(l.id),stack:d,from:a.nodes[e],cur:a.nodes[l.idLogic],by:u(t)}),i.push({by:u(t),from:a.nodes[e],value:a.nodes[l.idLogic]});break;case r.EPS:d=o.cpyTo(new s.Stack);a.matchDownEpsVal(l,d),c.push({stmt:a.statements.get(l.id),stack:d,from:a.nodes[e],cur:a.nodes[l.idLogic],by:u(t)}),i.push({by:u(t),from:a.nodes[e],value:a.nodes[l.idLogic]})}}),c},e.prototype.isDeterministic=function(){var t=!0;return this.matrix.forEach(function(e){return e.forEach(function(e){var n=e[0],o=e.reduce(function(t,e){return t||e.stackDown===n.stackDown},!1);e.length>1&&o&&(t=!1)})}),t&&!this.haveEpsilon()},e.prototype.haveAdmitting=function(t){var e=!1;return!1===this.admitByEmptyStack||void 0===this.admitByEmptyStack?(t.forEach(function(t){t.stmt.isAdmit&&(e=!0)}),e):(t.forEach(function(t){0===t.stack.size()&&(e=!0)}),e)},e.prototype.toNodes=function(t){var e=this,n=[];return t.forEach(function(t){var o=i(i({},e.nodes[t.stmt.idLogic]),{stack:t.stack.getStorage(),from:t.from,cur:t.cur,by:t.by});n.push(o)}),n},e}(r.Computer);e.PDA=u;!function(){function t(t){void 0===t&&(t=1/0),this.capacity=t,this.storage=[]}t.prototype.enqueue=function(t){if(this.size()===this.capacity)throw Error("Queue has reached max capacity, you cannot add more items");this.storage.push(t)},t.prototype.dequeue=function(){return this.storage.shift()},t.prototype.size=function(){return this.storage.length},t.prototype.getStorage=function(){return this.storage}}();var l=function(){function t(){this.table=new Map,this.set=[]}return t.prototype.normalize=function(t){var e=a.cloneDeep(t);return e=e.sort()},t.prototype.getItter=function(t){if(!this.has(t))throw Error;var e=0,n=this.normalize(t);return this.set.forEach(function(t,o){JSON.stringify(n)===JSON.stringify(t)&&(e=o)}),e},t.prototype.has=function(t){var e=this.normalize(t),n=JSON.stringify(e);return this.table.has(n)},t.prototype.myForEach=function(t){this.set.forEach(function(e,n){t(e,n)})},t.prototype.add=function(t){var e=this.normalize(t),n=JSON.stringify(e);this.table.has(n)||(this.table.set(n,e),this.set.push(e))},t.prototype.size=function(){return this.set.length},t.prototype.getNth=function(t){return this.set[t]},t.prototype.getIter=function(t){var e=this.normalize(t),n=JSON.stringify(e),o=0;return this.set.forEach(function(t,e){JSON.stringify(t)===n&&(o=e)}),o},t.prototype.getStorage=function(){return this.set},t}();e.ImSet=l;var d=new u({nodes:[{id:10,isAdmit:!1},{id:11,isAdmit:!1},{id:12,isAdmit:!1},{id:13,isAdmit:!1},{id:14,isAdmit:!1},{id:15,isAdmit:!1},{id:16,isAdmit:!1},{id:17,isAdmit:!1}],edges:[{from:10,to:11,transitions:new Set([[{title:"a"}]])},{from:11,to:12,transitions:new Set([[{title:r.EPS}]])},{from:12,to:13,transitions:new Set([[{title:"b"}]])},{from:14,to:15,transitions:new Set([[{title:"a"}]])},{from:15,to:16,transitions:new Set([[{title:r.EPS}]])},{from:16,to:17,transitions:new Set([[{title:"b"}]])}]},[{id:10,isAdmit:!1},{id:14,isAdmit:!1}],["a","a"]).step();console.log(),console.log(),console.log("Letter"),console.log(d.byLetter),console.log("byEpsPred"),console.log(d.byEpsPred),console.log("byEpsAfter"),console.log(d.byEpsAfter)},87:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();e.__esModule=!0;var i=function(t){function e(e,n,o){var i=t.call(this,e,n,o)||this;return i.enfaStep=function(){var t,e=i._step(i.counterSteps,i.alphabet.get(null===(t=i.input[i.counterSteps])||void 0===t?void 0:t.value),i.historiStep,[]);return i.counterSteps=e.counter,i.historiStep=e.history,e.nodes.forEach(function(t){return t.stack=void 0}),e.history.forEach(function(t){return t.nodes.forEach(function(t){return t.stack=void 0})}),e},i.enfaRun=function(){var t=[];i.historiRun=[],i.counterStepsForResult=0;for(var e=0;e<i.input.length-1;e++){var n=i._step(i.counterStepsForResult,i.alphabet.get(i.input[i.counterStepsForResult].value),i.historiRun,t);i.counterStepsForResult=n.counter,i.historiRun=n.history}var o=i._step(i.counterStepsForResult,i.alphabet.get(i.input[i.counterStepsForResult].value),i.historiRun,t);return o.nodes.forEach(function(t){return t.stack=void 0}),o.history.forEach(function(t){return t.nodes.forEach(function(t){return t.stack=void 0})}),o},i.step=i.enfaStep,i.run=i.enfaRun,i}return o(e,t),e}(n(69).PDA);e.EpsilonNFA=i}},[[188,1,2]]]);
//# sourceMappingURL=main.5c5c0adc.chunk.js.map